{"version":3,"file":"natninter.umd.js","sources":["../node_modules/voronoi/rhill-voronoi-core.js","../node_modules/area-polygon/index.js","../node_modules/polybooljs/lib/build-log.js","../node_modules/polybooljs/lib/epsilon.js","../node_modules/polybooljs/lib/linked-list.js","../node_modules/polybooljs/lib/intersecter.js","../node_modules/polybooljs/lib/segment-chainer.js","../node_modules/polybooljs/lib/segment-selector.js","../node_modules/polybooljs/lib/geojson.js","../node_modules/polybooljs/index.js","../src/VectorTools.js","../src/ConvexPolygon.js","../src/Cell.js","../src/CellCollection.js","../src/Interpolator.js"],"sourcesContent":["/*!\nCopyright (C) 2010-2013 Raymond Hill: https://github.com/gorhill/Javascript-Voronoi\nMIT License: See https://github.com/gorhill/Javascript-Voronoi/LICENSE.md\n*/\n/*\nAuthor: Raymond Hill (rhill@raymondhill.net)\nContributor: Jesse Morgan (morgajel@gmail.com)\nFile: rhill-voronoi-core.js\nVersion: 0.98\nDate: January 21, 2013\nDescription: This is my personal Javascript implementation of\nSteven Fortune's algorithm to compute Voronoi diagrams.\n\nLicense: See https://github.com/gorhill/Javascript-Voronoi/LICENSE.md\nCredits: See https://github.com/gorhill/Javascript-Voronoi/CREDITS.md\nHistory: See https://github.com/gorhill/Javascript-Voronoi/CHANGELOG.md\n\n## Usage:\n\n  var sites = [{x:300,y:300}, {x:100,y:100}, {x:200,y:500}, {x:250,y:450}, {x:600,y:150}];\n  // xl, xr means x left, x right\n  // yt, yb means y top, y bottom\n  var bbox = {xl:0, xr:800, yt:0, yb:600};\n  var voronoi = new Voronoi();\n  // pass an object which exhibits xl, xr, yt, yb properties. The bounding\n  // box will be used to connect unbound edges, and to close open cells\n  result = voronoi.compute(sites, bbox);\n  // render, further analyze, etc.\n\nReturn value:\n  An object with the following properties:\n\n  result.vertices = an array of unordered, unique Voronoi.Vertex objects making\n    up the Voronoi diagram.\n  result.edges = an array of unordered, unique Voronoi.Edge objects making up\n    the Voronoi diagram.\n  result.cells = an array of Voronoi.Cell object making up the Voronoi diagram.\n    A Cell object might have an empty array of halfedges, meaning no Voronoi\n    cell could be computed for a particular cell.\n  result.execTime = the time it took to compute the Voronoi diagram, in\n    milliseconds.\n\nVoronoi.Vertex object:\n  x: The x position of the vertex.\n  y: The y position of the vertex.\n\nVoronoi.Edge object:\n  lSite: the Voronoi site object at the left of this Voronoi.Edge object.\n  rSite: the Voronoi site object at the right of this Voronoi.Edge object (can\n    be null).\n  va: an object with an 'x' and a 'y' property defining the start point\n    (relative to the Voronoi site on the left) of this Voronoi.Edge object.\n  vb: an object with an 'x' and a 'y' property defining the end point\n    (relative to Voronoi site on the left) of this Voronoi.Edge object.\n\n  For edges which are used to close open cells (using the supplied bounding\n  box), the rSite property will be null.\n\nVoronoi.Cell object:\n  site: the Voronoi site object associated with the Voronoi cell.\n  halfedges: an array of Voronoi.Halfedge objects, ordered counterclockwise,\n    defining the polygon for this Voronoi cell.\n\nVoronoi.Halfedge object:\n  site: the Voronoi site object owning this Voronoi.Halfedge object.\n  edge: a reference to the unique Voronoi.Edge object underlying this\n    Voronoi.Halfedge object.\n  getStartpoint(): a method returning an object with an 'x' and a 'y' property\n    for the start point of this halfedge. Keep in mind halfedges are always\n    countercockwise.\n  getEndpoint(): a method returning an object with an 'x' and a 'y' property\n    for the end point of this halfedge. Keep in mind halfedges are always\n    countercockwise.\n\nTODO: Identify opportunities for performance improvement.\n\nTODO: Let the user close the Voronoi cells, do not do it automatically. Not only let\n      him close the cells, but also allow him to close more than once using a different\n      bounding box for the same Voronoi diagram.\n*/\n\n/*global Math */\n\n// ---------------------------------------------------------------------------\n\nfunction Voronoi() {\n    this.vertices = null;\n    this.edges = null;\n    this.cells = null;\n    this.toRecycle = null;\n    this.beachsectionJunkyard = [];\n    this.circleEventJunkyard = [];\n    this.vertexJunkyard = [];\n    this.edgeJunkyard = [];\n    this.cellJunkyard = [];\n    }\n\n// ---------------------------------------------------------------------------\n\nVoronoi.prototype.reset = function() {\n    if (!this.beachline) {\n        this.beachline = new this.RBTree();\n        }\n    // Move leftover beachsections to the beachsection junkyard.\n    if (this.beachline.root) {\n        var beachsection = this.beachline.getFirst(this.beachline.root);\n        while (beachsection) {\n            this.beachsectionJunkyard.push(beachsection); // mark for reuse\n            beachsection = beachsection.rbNext;\n            }\n        }\n    this.beachline.root = null;\n    if (!this.circleEvents) {\n        this.circleEvents = new this.RBTree();\n        }\n    this.circleEvents.root = this.firstCircleEvent = null;\n    this.vertices = [];\n    this.edges = [];\n    this.cells = [];\n    };\n\nVoronoi.prototype.sqrt = Math.sqrt;\nVoronoi.prototype.abs = Math.abs;\nVoronoi.prototype.ε = Voronoi.ε = 1e-9;\nVoronoi.prototype.invε = Voronoi.invε = 1.0 / Voronoi.ε;\nVoronoi.prototype.equalWithEpsilon = function(a,b){return this.abs(a-b)<1e-9;};\nVoronoi.prototype.greaterThanWithEpsilon = function(a,b){return a-b>1e-9;};\nVoronoi.prototype.greaterThanOrEqualWithEpsilon = function(a,b){return b-a<1e-9;};\nVoronoi.prototype.lessThanWithEpsilon = function(a,b){return b-a>1e-9;};\nVoronoi.prototype.lessThanOrEqualWithEpsilon = function(a,b){return a-b<1e-9;};\n\n// ---------------------------------------------------------------------------\n// Red-Black tree code (based on C version of \"rbtree\" by Franck Bui-Huu\n// https://github.com/fbuihuu/libtree/blob/master/rb.c\n\nVoronoi.prototype.RBTree = function() {\n    this.root = null;\n    };\n\nVoronoi.prototype.RBTree.prototype.rbInsertSuccessor = function(node, successor) {\n    var parent;\n    if (node) {\n        // >>> rhill 2011-05-27: Performance: cache previous/next nodes\n        successor.rbPrevious = node;\n        successor.rbNext = node.rbNext;\n        if (node.rbNext) {\n            node.rbNext.rbPrevious = successor;\n            }\n        node.rbNext = successor;\n        // <<<\n        if (node.rbRight) {\n            // in-place expansion of node.rbRight.getFirst();\n            node = node.rbRight;\n            while (node.rbLeft) {node = node.rbLeft;}\n            node.rbLeft = successor;\n            }\n        else {\n            node.rbRight = successor;\n            }\n        parent = node;\n        }\n    // rhill 2011-06-07: if node is null, successor must be inserted\n    // to the left-most part of the tree\n    else if (this.root) {\n        node = this.getFirst(this.root);\n        // >>> Performance: cache previous/next nodes\n        successor.rbPrevious = null;\n        successor.rbNext = node;\n        node.rbPrevious = successor;\n        // <<<\n        node.rbLeft = successor;\n        parent = node;\n        }\n    else {\n        // >>> Performance: cache previous/next nodes\n        successor.rbPrevious = successor.rbNext = null;\n        // <<<\n        this.root = successor;\n        parent = null;\n        }\n    successor.rbLeft = successor.rbRight = null;\n    successor.rbParent = parent;\n    successor.rbRed = true;\n    // Fixup the modified tree by recoloring nodes and performing\n    // rotations (2 at most) hence the red-black tree properties are\n    // preserved.\n    var grandpa, uncle;\n    node = successor;\n    while (parent && parent.rbRed) {\n        grandpa = parent.rbParent;\n        if (parent === grandpa.rbLeft) {\n            uncle = grandpa.rbRight;\n            if (uncle && uncle.rbRed) {\n                parent.rbRed = uncle.rbRed = false;\n                grandpa.rbRed = true;\n                node = grandpa;\n                }\n            else {\n                if (node === parent.rbRight) {\n                    this.rbRotateLeft(parent);\n                    node = parent;\n                    parent = node.rbParent;\n                    }\n                parent.rbRed = false;\n                grandpa.rbRed = true;\n                this.rbRotateRight(grandpa);\n                }\n            }\n        else {\n            uncle = grandpa.rbLeft;\n            if (uncle && uncle.rbRed) {\n                parent.rbRed = uncle.rbRed = false;\n                grandpa.rbRed = true;\n                node = grandpa;\n                }\n            else {\n                if (node === parent.rbLeft) {\n                    this.rbRotateRight(parent);\n                    node = parent;\n                    parent = node.rbParent;\n                    }\n                parent.rbRed = false;\n                grandpa.rbRed = true;\n                this.rbRotateLeft(grandpa);\n                }\n            }\n        parent = node.rbParent;\n        }\n    this.root.rbRed = false;\n    };\n\nVoronoi.prototype.RBTree.prototype.rbRemoveNode = function(node) {\n    // >>> rhill 2011-05-27: Performance: cache previous/next nodes\n    if (node.rbNext) {\n        node.rbNext.rbPrevious = node.rbPrevious;\n        }\n    if (node.rbPrevious) {\n        node.rbPrevious.rbNext = node.rbNext;\n        }\n    node.rbNext = node.rbPrevious = null;\n    // <<<\n    var parent = node.rbParent,\n        left = node.rbLeft,\n        right = node.rbRight,\n        next;\n    if (!left) {\n        next = right;\n        }\n    else if (!right) {\n        next = left;\n        }\n    else {\n        next = this.getFirst(right);\n        }\n    if (parent) {\n        if (parent.rbLeft === node) {\n            parent.rbLeft = next;\n            }\n        else {\n            parent.rbRight = next;\n            }\n        }\n    else {\n        this.root = next;\n        }\n    // enforce red-black rules\n    var isRed;\n    if (left && right) {\n        isRed = next.rbRed;\n        next.rbRed = node.rbRed;\n        next.rbLeft = left;\n        left.rbParent = next;\n        if (next !== right) {\n            parent = next.rbParent;\n            next.rbParent = node.rbParent;\n            node = next.rbRight;\n            parent.rbLeft = node;\n            next.rbRight = right;\n            right.rbParent = next;\n            }\n        else {\n            next.rbParent = parent;\n            parent = next;\n            node = next.rbRight;\n            }\n        }\n    else {\n        isRed = node.rbRed;\n        node = next;\n        }\n    // 'node' is now the sole successor's child and 'parent' its\n    // new parent (since the successor can have been moved)\n    if (node) {\n        node.rbParent = parent;\n        }\n    // the 'easy' cases\n    if (isRed) {return;}\n    if (node && node.rbRed) {\n        node.rbRed = false;\n        return;\n        }\n    // the other cases\n    var sibling;\n    do {\n        if (node === this.root) {\n            break;\n            }\n        if (node === parent.rbLeft) {\n            sibling = parent.rbRight;\n            if (sibling.rbRed) {\n                sibling.rbRed = false;\n                parent.rbRed = true;\n                this.rbRotateLeft(parent);\n                sibling = parent.rbRight;\n                }\n            if ((sibling.rbLeft && sibling.rbLeft.rbRed) || (sibling.rbRight && sibling.rbRight.rbRed)) {\n                if (!sibling.rbRight || !sibling.rbRight.rbRed) {\n                    sibling.rbLeft.rbRed = false;\n                    sibling.rbRed = true;\n                    this.rbRotateRight(sibling);\n                    sibling = parent.rbRight;\n                    }\n                sibling.rbRed = parent.rbRed;\n                parent.rbRed = sibling.rbRight.rbRed = false;\n                this.rbRotateLeft(parent);\n                node = this.root;\n                break;\n                }\n            }\n        else {\n            sibling = parent.rbLeft;\n            if (sibling.rbRed) {\n                sibling.rbRed = false;\n                parent.rbRed = true;\n                this.rbRotateRight(parent);\n                sibling = parent.rbLeft;\n                }\n            if ((sibling.rbLeft && sibling.rbLeft.rbRed) || (sibling.rbRight && sibling.rbRight.rbRed)) {\n                if (!sibling.rbLeft || !sibling.rbLeft.rbRed) {\n                    sibling.rbRight.rbRed = false;\n                    sibling.rbRed = true;\n                    this.rbRotateLeft(sibling);\n                    sibling = parent.rbLeft;\n                    }\n                sibling.rbRed = parent.rbRed;\n                parent.rbRed = sibling.rbLeft.rbRed = false;\n                this.rbRotateRight(parent);\n                node = this.root;\n                break;\n                }\n            }\n        sibling.rbRed = true;\n        node = parent;\n        parent = parent.rbParent;\n    } while (!node.rbRed);\n    if (node) {node.rbRed = false;}\n    };\n\nVoronoi.prototype.RBTree.prototype.rbRotateLeft = function(node) {\n    var p = node,\n        q = node.rbRight, // can't be null\n        parent = p.rbParent;\n    if (parent) {\n        if (parent.rbLeft === p) {\n            parent.rbLeft = q;\n            }\n        else {\n            parent.rbRight = q;\n            }\n        }\n    else {\n        this.root = q;\n        }\n    q.rbParent = parent;\n    p.rbParent = q;\n    p.rbRight = q.rbLeft;\n    if (p.rbRight) {\n        p.rbRight.rbParent = p;\n        }\n    q.rbLeft = p;\n    };\n\nVoronoi.prototype.RBTree.prototype.rbRotateRight = function(node) {\n    var p = node,\n        q = node.rbLeft, // can't be null\n        parent = p.rbParent;\n    if (parent) {\n        if (parent.rbLeft === p) {\n            parent.rbLeft = q;\n            }\n        else {\n            parent.rbRight = q;\n            }\n        }\n    else {\n        this.root = q;\n        }\n    q.rbParent = parent;\n    p.rbParent = q;\n    p.rbLeft = q.rbRight;\n    if (p.rbLeft) {\n        p.rbLeft.rbParent = p;\n        }\n    q.rbRight = p;\n    };\n\nVoronoi.prototype.RBTree.prototype.getFirst = function(node) {\n    while (node.rbLeft) {\n        node = node.rbLeft;\n        }\n    return node;\n    };\n\nVoronoi.prototype.RBTree.prototype.getLast = function(node) {\n    while (node.rbRight) {\n        node = node.rbRight;\n        }\n    return node;\n    };\n\n// ---------------------------------------------------------------------------\n// Diagram methods\n\nVoronoi.prototype.Diagram = function(site) {\n    this.site = site;\n    };\n\n// ---------------------------------------------------------------------------\n// Cell methods\n\nVoronoi.prototype.Cell = function(site) {\n    this.site = site;\n    this.halfedges = [];\n    this.closeMe = false;\n    };\n\nVoronoi.prototype.Cell.prototype.init = function(site) {\n    this.site = site;\n    this.halfedges = [];\n    this.closeMe = false;\n    return this;\n    };\n\nVoronoi.prototype.createCell = function(site) {\n    var cell = this.cellJunkyard.pop();\n    if ( cell ) {\n        return cell.init(site);\n        }\n    return new this.Cell(site);\n    };\n\nVoronoi.prototype.Cell.prototype.prepareHalfedges = function() {\n    var halfedges = this.halfedges,\n        iHalfedge = halfedges.length,\n        edge;\n    // get rid of unused halfedges\n    // rhill 2011-05-27: Keep it simple, no point here in trying\n    // to be fancy: dangling edges are a typically a minority.\n    while (iHalfedge--) {\n        edge = halfedges[iHalfedge].edge;\n        if (!edge.vb || !edge.va) {\n            halfedges.splice(iHalfedge,1);\n            }\n        }\n\n    // rhill 2011-05-26: I tried to use a binary search at insertion\n    // time to keep the array sorted on-the-fly (in Cell.addHalfedge()).\n    // There was no real benefits in doing so, performance on\n    // Firefox 3.6 was improved marginally, while performance on\n    // Opera 11 was penalized marginally.\n    halfedges.sort(function(a,b){return b.angle-a.angle;});\n    return halfedges.length;\n    };\n\n// Return a list of the neighbor Ids\nVoronoi.prototype.Cell.prototype.getNeighborIds = function() {\n    var neighbors = [],\n        iHalfedge = this.halfedges.length,\n        edge;\n    while (iHalfedge--){\n        edge = this.halfedges[iHalfedge].edge;\n        if (edge.lSite !== null && edge.lSite.voronoiId != this.site.voronoiId) {\n            neighbors.push(edge.lSite.voronoiId);\n            }\n        else if (edge.rSite !== null && edge.rSite.voronoiId != this.site.voronoiId){\n            neighbors.push(edge.rSite.voronoiId);\n            }\n        }\n    return neighbors;\n    };\n\n// Compute bounding box\n//\nVoronoi.prototype.Cell.prototype.getBbox = function() {\n    var halfedges = this.halfedges,\n        iHalfedge = halfedges.length,\n        xmin = Infinity,\n        ymin = Infinity,\n        xmax = -Infinity,\n        ymax = -Infinity,\n        v, vx, vy;\n    while (iHalfedge--) {\n        v = halfedges[iHalfedge].getStartpoint();\n        vx = v.x;\n        vy = v.y;\n        if (vx < xmin) {xmin = vx;}\n        if (vy < ymin) {ymin = vy;}\n        if (vx > xmax) {xmax = vx;}\n        if (vy > ymax) {ymax = vy;}\n        // we dont need to take into account end point,\n        // since each end point matches a start point\n        }\n    return {\n        x: xmin,\n        y: ymin,\n        width: xmax-xmin,\n        height: ymax-ymin\n        };\n    };\n\n// Return whether a point is inside, on, or outside the cell:\n//   -1: point is outside the perimeter of the cell\n//    0: point is on the perimeter of the cell\n//    1: point is inside the perimeter of the cell\n//\nVoronoi.prototype.Cell.prototype.pointIntersection = function(x, y) {\n    // Check if point in polygon. Since all polygons of a Voronoi\n    // diagram are convex, then:\n    // http://paulbourke.net/geometry/polygonmesh/\n    // Solution 3 (2D):\n    //   \"If the polygon is convex then one can consider the polygon\n    //   \"as a 'path' from the first vertex. A point is on the interior\n    //   \"of this polygons if it is always on the same side of all the\n    //   \"line segments making up the path. ...\n    //   \"(y - y0) (x1 - x0) - (x - x0) (y1 - y0)\n    //   \"if it is less than 0 then P is to the right of the line segment,\n    //   \"if greater than 0 it is to the left, if equal to 0 then it lies\n    //   \"on the line segment\"\n    var halfedges = this.halfedges,\n        iHalfedge = halfedges.length,\n        halfedge,\n        p0, p1, r;\n    while (iHalfedge--) {\n        halfedge = halfedges[iHalfedge];\n        p0 = halfedge.getStartpoint();\n        p1 = halfedge.getEndpoint();\n        r = (y-p0.y)*(p1.x-p0.x)-(x-p0.x)*(p1.y-p0.y);\n        if (!r) {\n            return 0;\n            }\n        if (r > 0) {\n            return -1;\n            }\n        }\n    return 1;\n    };\n\n// ---------------------------------------------------------------------------\n// Edge methods\n//\n\nVoronoi.prototype.Vertex = function(x, y) {\n    this.x = x;\n    this.y = y;\n    };\n\nVoronoi.prototype.Edge = function(lSite, rSite) {\n    this.lSite = lSite;\n    this.rSite = rSite;\n    this.va = this.vb = null;\n    };\n\nVoronoi.prototype.Halfedge = function(edge, lSite, rSite) {\n    this.site = lSite;\n    this.edge = edge;\n    // 'angle' is a value to be used for properly sorting the\n    // halfsegments counterclockwise. By convention, we will\n    // use the angle of the line defined by the 'site to the left'\n    // to the 'site to the right'.\n    // However, border edges have no 'site to the right': thus we\n    // use the angle of line perpendicular to the halfsegment (the\n    // edge should have both end points defined in such case.)\n    if (rSite) {\n        this.angle = Math.atan2(rSite.y-lSite.y, rSite.x-lSite.x);\n        }\n    else {\n        var va = edge.va,\n            vb = edge.vb;\n        // rhill 2011-05-31: used to call getStartpoint()/getEndpoint(),\n        // but for performance purpose, these are expanded in place here.\n        this.angle = edge.lSite === lSite ?\n            Math.atan2(vb.x-va.x, va.y-vb.y) :\n            Math.atan2(va.x-vb.x, vb.y-va.y);\n        }\n    };\n\nVoronoi.prototype.createHalfedge = function(edge, lSite, rSite) {\n    return new this.Halfedge(edge, lSite, rSite);\n    };\n\nVoronoi.prototype.Halfedge.prototype.getStartpoint = function() {\n    return this.edge.lSite === this.site ? this.edge.va : this.edge.vb;\n    };\n\nVoronoi.prototype.Halfedge.prototype.getEndpoint = function() {\n    return this.edge.lSite === this.site ? this.edge.vb : this.edge.va;\n    };\n\n\n\n// this create and add a vertex to the internal collection\n\nVoronoi.prototype.createVertex = function(x, y) {\n    var v = this.vertexJunkyard.pop();\n    if ( !v ) {\n        v = new this.Vertex(x, y);\n        }\n    else {\n        v.x = x;\n        v.y = y;\n        }\n    this.vertices.push(v);\n    return v;\n    };\n\n// this create and add an edge to internal collection, and also create\n// two halfedges which are added to each site's counterclockwise array\n// of halfedges.\n\nVoronoi.prototype.createEdge = function(lSite, rSite, va, vb) {\n    var edge = this.edgeJunkyard.pop();\n    if ( !edge ) {\n        edge = new this.Edge(lSite, rSite);\n        }\n    else {\n        edge.lSite = lSite;\n        edge.rSite = rSite;\n        edge.va = edge.vb = null;\n        }\n\n    this.edges.push(edge);\n    if (va) {\n        this.setEdgeStartpoint(edge, lSite, rSite, va);\n        }\n    if (vb) {\n        this.setEdgeEndpoint(edge, lSite, rSite, vb);\n        }\n    this.cells[lSite.voronoiId].halfedges.push(this.createHalfedge(edge, lSite, rSite));\n    this.cells[rSite.voronoiId].halfedges.push(this.createHalfedge(edge, rSite, lSite));\n    return edge;\n    };\n\nVoronoi.prototype.createBorderEdge = function(lSite, va, vb) {\n    var edge = this.edgeJunkyard.pop();\n    if ( !edge ) {\n        edge = new this.Edge(lSite, null);\n        }\n    else {\n        edge.lSite = lSite;\n        edge.rSite = null;\n        }\n    edge.va = va;\n    edge.vb = vb;\n    this.edges.push(edge);\n    return edge;\n    };\n\nVoronoi.prototype.setEdgeStartpoint = function(edge, lSite, rSite, vertex) {\n    if (!edge.va && !edge.vb) {\n        edge.va = vertex;\n        edge.lSite = lSite;\n        edge.rSite = rSite;\n        }\n    else if (edge.lSite === rSite) {\n        edge.vb = vertex;\n        }\n    else {\n        edge.va = vertex;\n        }\n    };\n\nVoronoi.prototype.setEdgeEndpoint = function(edge, lSite, rSite, vertex) {\n    this.setEdgeStartpoint(edge, rSite, lSite, vertex);\n    };\n\n// ---------------------------------------------------------------------------\n// Beachline methods\n\n// rhill 2011-06-07: For some reasons, performance suffers significantly\n// when instanciating a literal object instead of an empty ctor\nVoronoi.prototype.Beachsection = function() {\n    };\n\n// rhill 2011-06-02: A lot of Beachsection instanciations\n// occur during the computation of the Voronoi diagram,\n// somewhere between the number of sites and twice the\n// number of sites, while the number of Beachsections on the\n// beachline at any given time is comparatively low. For this\n// reason, we reuse already created Beachsections, in order\n// to avoid new memory allocation. This resulted in a measurable\n// performance gain.\n\nVoronoi.prototype.createBeachsection = function(site) {\n    var beachsection = this.beachsectionJunkyard.pop();\n    if (!beachsection) {\n        beachsection = new this.Beachsection();\n        }\n    beachsection.site = site;\n    return beachsection;\n    };\n\n// calculate the left break point of a particular beach section,\n// given a particular sweep line\nVoronoi.prototype.leftBreakPoint = function(arc, directrix) {\n    // http://en.wikipedia.org/wiki/Parabola\n    // http://en.wikipedia.org/wiki/Quadratic_equation\n    // h1 = x1,\n    // k1 = (y1+directrix)/2,\n    // h2 = x2,\n    // k2 = (y2+directrix)/2,\n    // p1 = k1-directrix,\n    // a1 = 1/(4*p1),\n    // b1 = -h1/(2*p1),\n    // c1 = h1*h1/(4*p1)+k1,\n    // p2 = k2-directrix,\n    // a2 = 1/(4*p2),\n    // b2 = -h2/(2*p2),\n    // c2 = h2*h2/(4*p2)+k2,\n    // x = (-(b2-b1) + Math.sqrt((b2-b1)*(b2-b1) - 4*(a2-a1)*(c2-c1))) / (2*(a2-a1))\n    // When x1 become the x-origin:\n    // h1 = 0,\n    // k1 = (y1+directrix)/2,\n    // h2 = x2-x1,\n    // k2 = (y2+directrix)/2,\n    // p1 = k1-directrix,\n    // a1 = 1/(4*p1),\n    // b1 = 0,\n    // c1 = k1,\n    // p2 = k2-directrix,\n    // a2 = 1/(4*p2),\n    // b2 = -h2/(2*p2),\n    // c2 = h2*h2/(4*p2)+k2,\n    // x = (-b2 + Math.sqrt(b2*b2 - 4*(a2-a1)*(c2-k1))) / (2*(a2-a1)) + x1\n\n    // change code below at your own risk: care has been taken to\n    // reduce errors due to computers' finite arithmetic precision.\n    // Maybe can still be improved, will see if any more of this\n    // kind of errors pop up again.\n    var site = arc.site,\n        rfocx = site.x,\n        rfocy = site.y,\n        pby2 = rfocy-directrix;\n    // parabola in degenerate case where focus is on directrix\n    if (!pby2) {\n        return rfocx;\n        }\n    var lArc = arc.rbPrevious;\n    if (!lArc) {\n        return -Infinity;\n        }\n    site = lArc.site;\n    var lfocx = site.x,\n        lfocy = site.y,\n        plby2 = lfocy-directrix;\n    // parabola in degenerate case where focus is on directrix\n    if (!plby2) {\n        return lfocx;\n        }\n    var hl = lfocx-rfocx,\n        aby2 = 1/pby2-1/plby2,\n        b = hl/plby2;\n    if (aby2) {\n        return (-b+this.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx;\n        }\n    // both parabolas have same distance to directrix, thus break point is midway\n    return (rfocx+lfocx)/2;\n    };\n\n// calculate the right break point of a particular beach section,\n// given a particular directrix\nVoronoi.prototype.rightBreakPoint = function(arc, directrix) {\n    var rArc = arc.rbNext;\n    if (rArc) {\n        return this.leftBreakPoint(rArc, directrix);\n        }\n    var site = arc.site;\n    return site.y === directrix ? site.x : Infinity;\n    };\n\nVoronoi.prototype.detachBeachsection = function(beachsection) {\n    this.detachCircleEvent(beachsection); // detach potentially attached circle event\n    this.beachline.rbRemoveNode(beachsection); // remove from RB-tree\n    this.beachsectionJunkyard.push(beachsection); // mark for reuse\n    };\n\nVoronoi.prototype.removeBeachsection = function(beachsection) {\n    var circle = beachsection.circleEvent,\n        x = circle.x,\n        y = circle.ycenter,\n        vertex = this.createVertex(x, y),\n        previous = beachsection.rbPrevious,\n        next = beachsection.rbNext,\n        disappearingTransitions = [beachsection],\n        abs_fn = Math.abs;\n\n    // remove collapsed beachsection from beachline\n    this.detachBeachsection(beachsection);\n\n    // there could be more than one empty arc at the deletion point, this\n    // happens when more than two edges are linked by the same vertex,\n    // so we will collect all those edges by looking up both sides of\n    // the deletion point.\n    // by the way, there is *always* a predecessor/successor to any collapsed\n    // beach section, it's just impossible to have a collapsing first/last\n    // beach sections on the beachline, since they obviously are unconstrained\n    // on their left/right side.\n\n    // look left\n    var lArc = previous;\n    while (lArc.circleEvent && abs_fn(x-lArc.circleEvent.x)<1e-9 && abs_fn(y-lArc.circleEvent.ycenter)<1e-9) {\n        previous = lArc.rbPrevious;\n        disappearingTransitions.unshift(lArc);\n        this.detachBeachsection(lArc); // mark for reuse\n        lArc = previous;\n        }\n    // even though it is not disappearing, I will also add the beach section\n    // immediately to the left of the left-most collapsed beach section, for\n    // convenience, since we need to refer to it later as this beach section\n    // is the 'left' site of an edge for which a start point is set.\n    disappearingTransitions.unshift(lArc);\n    this.detachCircleEvent(lArc);\n\n    // look right\n    var rArc = next;\n    while (rArc.circleEvent && abs_fn(x-rArc.circleEvent.x)<1e-9 && abs_fn(y-rArc.circleEvent.ycenter)<1e-9) {\n        next = rArc.rbNext;\n        disappearingTransitions.push(rArc);\n        this.detachBeachsection(rArc); // mark for reuse\n        rArc = next;\n        }\n    // we also have to add the beach section immediately to the right of the\n    // right-most collapsed beach section, since there is also a disappearing\n    // transition representing an edge's start point on its left.\n    disappearingTransitions.push(rArc);\n    this.detachCircleEvent(rArc);\n\n    // walk through all the disappearing transitions between beach sections and\n    // set the start point of their (implied) edge.\n    var nArcs = disappearingTransitions.length,\n        iArc;\n    for (iArc=1; iArc<nArcs; iArc++) {\n        rArc = disappearingTransitions[iArc];\n        lArc = disappearingTransitions[iArc-1];\n        this.setEdgeStartpoint(rArc.edge, lArc.site, rArc.site, vertex);\n        }\n\n    // create a new edge as we have now a new transition between\n    // two beach sections which were previously not adjacent.\n    // since this edge appears as a new vertex is defined, the vertex\n    // actually define an end point of the edge (relative to the site\n    // on the left)\n    lArc = disappearingTransitions[0];\n    rArc = disappearingTransitions[nArcs-1];\n    rArc.edge = this.createEdge(lArc.site, rArc.site, undefined, vertex);\n\n    // create circle events if any for beach sections left in the beachline\n    // adjacent to collapsed sections\n    this.attachCircleEvent(lArc);\n    this.attachCircleEvent(rArc);\n    };\n\nVoronoi.prototype.addBeachsection = function(site) {\n    var x = site.x,\n        directrix = site.y;\n\n    // find the left and right beach sections which will surround the newly\n    // created beach section.\n    // rhill 2011-06-01: This loop is one of the most often executed,\n    // hence we expand in-place the comparison-against-epsilon calls.\n    var lArc, rArc,\n        dxl, dxr,\n        node = this.beachline.root;\n\n    while (node) {\n        dxl = this.leftBreakPoint(node,directrix)-x;\n        // x lessThanWithEpsilon xl => falls somewhere before the left edge of the beachsection\n        if (dxl > 1e-9) {\n            // this case should never happen\n            // if (!node.rbLeft) {\n            //    rArc = node.rbLeft;\n            //    break;\n            //    }\n            node = node.rbLeft;\n            }\n        else {\n            dxr = x-this.rightBreakPoint(node,directrix);\n            // x greaterThanWithEpsilon xr => falls somewhere after the right edge of the beachsection\n            if (dxr > 1e-9) {\n                if (!node.rbRight) {\n                    lArc = node;\n                    break;\n                    }\n                node = node.rbRight;\n                }\n            else {\n                // x equalWithEpsilon xl => falls exactly on the left edge of the beachsection\n                if (dxl > -1e-9) {\n                    lArc = node.rbPrevious;\n                    rArc = node;\n                    }\n                // x equalWithEpsilon xr => falls exactly on the right edge of the beachsection\n                else if (dxr > -1e-9) {\n                    lArc = node;\n                    rArc = node.rbNext;\n                    }\n                // falls exactly somewhere in the middle of the beachsection\n                else {\n                    lArc = rArc = node;\n                    }\n                break;\n                }\n            }\n        }\n    // at this point, keep in mind that lArc and/or rArc could be\n    // undefined or null.\n\n    // create a new beach section object for the site and add it to RB-tree\n    var newArc = this.createBeachsection(site);\n    this.beachline.rbInsertSuccessor(lArc, newArc);\n\n    // cases:\n    //\n\n    // [null,null]\n    // least likely case: new beach section is the first beach section on the\n    // beachline.\n    // This case means:\n    //   no new transition appears\n    //   no collapsing beach section\n    //   new beachsection become root of the RB-tree\n    if (!lArc && !rArc) {\n        return;\n        }\n\n    // [lArc,rArc] where lArc == rArc\n    // most likely case: new beach section split an existing beach\n    // section.\n    // This case means:\n    //   one new transition appears\n    //   the left and right beach section might be collapsing as a result\n    //   two new nodes added to the RB-tree\n    if (lArc === rArc) {\n        // invalidate circle event of split beach section\n        this.detachCircleEvent(lArc);\n\n        // split the beach section into two separate beach sections\n        rArc = this.createBeachsection(lArc.site);\n        this.beachline.rbInsertSuccessor(newArc, rArc);\n\n        // since we have a new transition between two beach sections,\n        // a new edge is born\n        newArc.edge = rArc.edge = this.createEdge(lArc.site, newArc.site);\n\n        // check whether the left and right beach sections are collapsing\n        // and if so create circle events, to be notified when the point of\n        // collapse is reached.\n        this.attachCircleEvent(lArc);\n        this.attachCircleEvent(rArc);\n        return;\n        }\n\n    // [lArc,null]\n    // even less likely case: new beach section is the *last* beach section\n    // on the beachline -- this can happen *only* if *all* the previous beach\n    // sections currently on the beachline share the same y value as\n    // the new beach section.\n    // This case means:\n    //   one new transition appears\n    //   no collapsing beach section as a result\n    //   new beach section become right-most node of the RB-tree\n    if (lArc && !rArc) {\n        newArc.edge = this.createEdge(lArc.site,newArc.site);\n        return;\n        }\n\n    // [null,rArc]\n    // impossible case: because sites are strictly processed from top to bottom,\n    // and left to right, which guarantees that there will always be a beach section\n    // on the left -- except of course when there are no beach section at all on\n    // the beach line, which case was handled above.\n    // rhill 2011-06-02: No point testing in non-debug version\n    //if (!lArc && rArc) {\n    //    throw \"Voronoi.addBeachsection(): What is this I don't even\";\n    //    }\n\n    // [lArc,rArc] where lArc != rArc\n    // somewhat less likely case: new beach section falls *exactly* in between two\n    // existing beach sections\n    // This case means:\n    //   one transition disappears\n    //   two new transitions appear\n    //   the left and right beach section might be collapsing as a result\n    //   only one new node added to the RB-tree\n    if (lArc !== rArc) {\n        // invalidate circle events of left and right sites\n        this.detachCircleEvent(lArc);\n        this.detachCircleEvent(rArc);\n\n        // an existing transition disappears, meaning a vertex is defined at\n        // the disappearance point.\n        // since the disappearance is caused by the new beachsection, the\n        // vertex is at the center of the circumscribed circle of the left,\n        // new and right beachsections.\n        // http://mathforum.org/library/drmath/view/55002.html\n        // Except that I bring the origin at A to simplify\n        // calculation\n        var lSite = lArc.site,\n            ax = lSite.x,\n            ay = lSite.y,\n            bx=site.x-ax,\n            by=site.y-ay,\n            rSite = rArc.site,\n            cx=rSite.x-ax,\n            cy=rSite.y-ay,\n            d=2*(bx*cy-by*cx),\n            hb=bx*bx+by*by,\n            hc=cx*cx+cy*cy,\n            vertex = this.createVertex((cy*hb-by*hc)/d+ax, (bx*hc-cx*hb)/d+ay);\n\n        // one transition disappear\n        this.setEdgeStartpoint(rArc.edge, lSite, rSite, vertex);\n\n        // two new transitions appear at the new vertex location\n        newArc.edge = this.createEdge(lSite, site, undefined, vertex);\n        rArc.edge = this.createEdge(site, rSite, undefined, vertex);\n\n        // check whether the left and right beach sections are collapsing\n        // and if so create circle events, to handle the point of collapse.\n        this.attachCircleEvent(lArc);\n        this.attachCircleEvent(rArc);\n        return;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Circle event methods\n\n// rhill 2011-06-07: For some reasons, performance suffers significantly\n// when instanciating a literal object instead of an empty ctor\nVoronoi.prototype.CircleEvent = function() {\n    // rhill 2013-10-12: it helps to state exactly what we are at ctor time.\n    this.arc = null;\n    this.rbLeft = null;\n    this.rbNext = null;\n    this.rbParent = null;\n    this.rbPrevious = null;\n    this.rbRed = false;\n    this.rbRight = null;\n    this.site = null;\n    this.x = this.y = this.ycenter = 0;\n    };\n\nVoronoi.prototype.attachCircleEvent = function(arc) {\n    var lArc = arc.rbPrevious,\n        rArc = arc.rbNext;\n    if (!lArc || !rArc) {return;} // does that ever happen?\n    var lSite = lArc.site,\n        cSite = arc.site,\n        rSite = rArc.site;\n\n    // If site of left beachsection is same as site of\n    // right beachsection, there can't be convergence\n    if (lSite===rSite) {return;}\n\n    // Find the circumscribed circle for the three sites associated\n    // with the beachsection triplet.\n    // rhill 2011-05-26: It is more efficient to calculate in-place\n    // rather than getting the resulting circumscribed circle from an\n    // object returned by calling Voronoi.circumcircle()\n    // http://mathforum.org/library/drmath/view/55002.html\n    // Except that I bring the origin at cSite to simplify calculations.\n    // The bottom-most part of the circumcircle is our Fortune 'circle\n    // event', and its center is a vertex potentially part of the final\n    // Voronoi diagram.\n    var bx = cSite.x,\n        by = cSite.y,\n        ax = lSite.x-bx,\n        ay = lSite.y-by,\n        cx = rSite.x-bx,\n        cy = rSite.y-by;\n\n    // If points l->c->r are clockwise, then center beach section does not\n    // collapse, hence it can't end up as a vertex (we reuse 'd' here, which\n    // sign is reverse of the orientation, hence we reverse the test.\n    // http://en.wikipedia.org/wiki/Curve_orientation#Orientation_of_a_simple_polygon\n    // rhill 2011-05-21: Nasty finite precision error which caused circumcircle() to\n    // return infinites: 1e-12 seems to fix the problem.\n    var d = 2*(ax*cy-ay*cx);\n    if (d >= -2e-12){return;}\n\n    var ha = ax*ax+ay*ay,\n        hc = cx*cx+cy*cy,\n        x = (cy*ha-ay*hc)/d,\n        y = (ax*hc-cx*ha)/d,\n        ycenter = y+by;\n\n    // Important: ybottom should always be under or at sweep, so no need\n    // to waste CPU cycles by checking\n\n    // recycle circle event object if possible\n    var circleEvent = this.circleEventJunkyard.pop();\n    if (!circleEvent) {\n        circleEvent = new this.CircleEvent();\n        }\n    circleEvent.arc = arc;\n    circleEvent.site = cSite;\n    circleEvent.x = x+bx;\n    circleEvent.y = ycenter+this.sqrt(x*x+y*y); // y bottom\n    circleEvent.ycenter = ycenter;\n    arc.circleEvent = circleEvent;\n\n    // find insertion point in RB-tree: circle events are ordered from\n    // smallest to largest\n    var predecessor = null,\n        node = this.circleEvents.root;\n    while (node) {\n        if (circleEvent.y < node.y || (circleEvent.y === node.y && circleEvent.x <= node.x)) {\n            if (node.rbLeft) {\n                node = node.rbLeft;\n                }\n            else {\n                predecessor = node.rbPrevious;\n                break;\n                }\n            }\n        else {\n            if (node.rbRight) {\n                node = node.rbRight;\n                }\n            else {\n                predecessor = node;\n                break;\n                }\n            }\n        }\n    this.circleEvents.rbInsertSuccessor(predecessor, circleEvent);\n    if (!predecessor) {\n        this.firstCircleEvent = circleEvent;\n        }\n    };\n\nVoronoi.prototype.detachCircleEvent = function(arc) {\n    var circleEvent = arc.circleEvent;\n    if (circleEvent) {\n        if (!circleEvent.rbPrevious) {\n            this.firstCircleEvent = circleEvent.rbNext;\n            }\n        this.circleEvents.rbRemoveNode(circleEvent); // remove from RB-tree\n        this.circleEventJunkyard.push(circleEvent);\n        arc.circleEvent = null;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Diagram completion methods\n\n// connect dangling edges (not if a cursory test tells us\n// it is not going to be visible.\n// return value:\n//   false: the dangling endpoint couldn't be connected\n//   true: the dangling endpoint could be connected\nVoronoi.prototype.connectEdge = function(edge, bbox) {\n    // skip if end point already connected\n    var vb = edge.vb;\n    if (!!vb) {return true;}\n\n    // make local copy for performance purpose\n    var va = edge.va,\n        xl = bbox.xl,\n        xr = bbox.xr,\n        yt = bbox.yt,\n        yb = bbox.yb,\n        lSite = edge.lSite,\n        rSite = edge.rSite,\n        lx = lSite.x,\n        ly = lSite.y,\n        rx = rSite.x,\n        ry = rSite.y,\n        fx = (lx+rx)/2,\n        fy = (ly+ry)/2,\n        fm, fb;\n\n    // if we reach here, this means cells which use this edge will need\n    // to be closed, whether because the edge was removed, or because it\n    // was connected to the bounding box.\n    this.cells[lSite.voronoiId].closeMe = true;\n    this.cells[rSite.voronoiId].closeMe = true;\n\n    // get the line equation of the bisector if line is not vertical\n    if (ry !== ly) {\n        fm = (lx-rx)/(ry-ly);\n        fb = fy-fm*fx;\n        }\n\n    // remember, direction of line (relative to left site):\n    // upward: left.x < right.x\n    // downward: left.x > right.x\n    // horizontal: left.x == right.x\n    // upward: left.x < right.x\n    // rightward: left.y < right.y\n    // leftward: left.y > right.y\n    // vertical: left.y == right.y\n\n    // depending on the direction, find the best side of the\n    // bounding box to use to determine a reasonable start point\n\n    // rhill 2013-12-02:\n    // While at it, since we have the values which define the line,\n    // clip the end of va if it is outside the bbox.\n    // https://github.com/gorhill/Javascript-Voronoi/issues/15\n    // TODO: Do all the clipping here rather than rely on Liang-Barsky\n    // which does not do well sometimes due to loss of arithmetic\n    // precision. The code here doesn't degrade if one of the vertex is\n    // at a huge distance.\n\n    // special case: vertical line\n    if (fm === undefined) {\n        // doesn't intersect with viewport\n        if (fx < xl || fx >= xr) {return false;}\n        // downward\n        if (lx > rx) {\n            if (!va || va.y < yt) {\n                va = this.createVertex(fx, yt);\n                }\n            else if (va.y >= yb) {\n                return false;\n                }\n            vb = this.createVertex(fx, yb);\n            }\n        // upward\n        else {\n            if (!va || va.y > yb) {\n                va = this.createVertex(fx, yb);\n                }\n            else if (va.y < yt) {\n                return false;\n                }\n            vb = this.createVertex(fx, yt);\n            }\n        }\n    // closer to vertical than horizontal, connect start point to the\n    // top or bottom side of the bounding box\n    else if (fm < -1 || fm > 1) {\n        // downward\n        if (lx > rx) {\n            if (!va || va.y < yt) {\n                va = this.createVertex((yt-fb)/fm, yt);\n                }\n            else if (va.y >= yb) {\n                return false;\n                }\n            vb = this.createVertex((yb-fb)/fm, yb);\n            }\n        // upward\n        else {\n            if (!va || va.y > yb) {\n                va = this.createVertex((yb-fb)/fm, yb);\n                }\n            else if (va.y < yt) {\n                return false;\n                }\n            vb = this.createVertex((yt-fb)/fm, yt);\n            }\n        }\n    // closer to horizontal than vertical, connect start point to the\n    // left or right side of the bounding box\n    else {\n        // rightward\n        if (ly < ry) {\n            if (!va || va.x < xl) {\n                va = this.createVertex(xl, fm*xl+fb);\n                }\n            else if (va.x >= xr) {\n                return false;\n                }\n            vb = this.createVertex(xr, fm*xr+fb);\n            }\n        // leftward\n        else {\n            if (!va || va.x > xr) {\n                va = this.createVertex(xr, fm*xr+fb);\n                }\n            else if (va.x < xl) {\n                return false;\n                }\n            vb = this.createVertex(xl, fm*xl+fb);\n            }\n        }\n    edge.va = va;\n    edge.vb = vb;\n\n    return true;\n    };\n\n// line-clipping code taken from:\n//   Liang-Barsky function by Daniel White\n//   http://www.skytopia.com/project/articles/compsci/clipping.html\n// Thanks!\n// A bit modified to minimize code paths\nVoronoi.prototype.clipEdge = function(edge, bbox) {\n    var ax = edge.va.x,\n        ay = edge.va.y,\n        bx = edge.vb.x,\n        by = edge.vb.y,\n        t0 = 0,\n        t1 = 1,\n        dx = bx-ax,\n        dy = by-ay;\n    // left\n    var q = ax-bbox.xl;\n    if (dx===0 && q<0) {return false;}\n    var r = -q/dx;\n    if (dx<0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n    else if (dx>0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    // right\n    q = bbox.xr-ax;\n    if (dx===0 && q<0) {return false;}\n    r = q/dx;\n    if (dx<0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    else if (dx>0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n    // top\n    q = ay-bbox.yt;\n    if (dy===0 && q<0) {return false;}\n    r = -q/dy;\n    if (dy<0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n    else if (dy>0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    // bottom        \n    q = bbox.yb-ay;\n    if (dy===0 && q<0) {return false;}\n    r = q/dy;\n    if (dy<0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    else if (dy>0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n\n    // if we reach this point, Voronoi edge is within bbox\n\n    // if t0 > 0, va needs to change\n    // rhill 2011-06-03: we need to create a new vertex rather\n    // than modifying the existing one, since the existing\n    // one is likely shared with at least another edge\n    if (t0 > 0) {\n        edge.va = this.createVertex(ax+t0*dx, ay+t0*dy);\n        }\n\n    // if t1 < 1, vb needs to change\n    // rhill 2011-06-03: we need to create a new vertex rather\n    // than modifying the existing one, since the existing\n    // one is likely shared with at least another edge\n    if (t1 < 1) {\n        edge.vb = this.createVertex(ax+t1*dx, ay+t1*dy);\n        }\n\n    // va and/or vb were clipped, thus we will need to close\n    // cells which use this edge.\n    if ( t0 > 0 || t1 < 1 ) {\n        this.cells[edge.lSite.voronoiId].closeMe = true;\n        this.cells[edge.rSite.voronoiId].closeMe = true;\n    }\n\n    return true;\n    };\n\n// Connect/cut edges at bounding box\nVoronoi.prototype.clipEdges = function(bbox) {\n    // connect all dangling edges to bounding box\n    // or get rid of them if it can't be done\n    var edges = this.edges,\n        iEdge = edges.length,\n        edge,\n        abs_fn = Math.abs;\n\n    // iterate backward so we can splice safely\n    while (iEdge--) {\n        edge = edges[iEdge];\n        // edge is removed if:\n        //   it is wholly outside the bounding box\n        //   it is looking more like a point than a line\n        if (!this.connectEdge(edge, bbox) ||\n            !this.clipEdge(edge, bbox) ||\n            (abs_fn(edge.va.x-edge.vb.x)<1e-9 && abs_fn(edge.va.y-edge.vb.y)<1e-9)) {\n            edge.va = edge.vb = null;\n            edges.splice(iEdge,1);\n            }\n        }\n    };\n\n// Close the cells.\n// The cells are bound by the supplied bounding box.\n// Each cell refers to its associated site, and a list\n// of halfedges ordered counterclockwise.\nVoronoi.prototype.closeCells = function(bbox) {\n    var xl = bbox.xl,\n        xr = bbox.xr,\n        yt = bbox.yt,\n        yb = bbox.yb,\n        cells = this.cells,\n        iCell = cells.length,\n        cell,\n        iLeft,\n        halfedges, nHalfedges,\n        edge,\n        va, vb, vz,\n        lastBorderSegment,\n        abs_fn = Math.abs;\n\n    while (iCell--) {\n        cell = cells[iCell];\n        // prune, order halfedges counterclockwise, then add missing ones\n        // required to close cells\n        if (!cell.prepareHalfedges()) {\n            continue;\n            }\n        if (!cell.closeMe) {\n            continue;\n            }\n        // find first 'unclosed' point.\n        // an 'unclosed' point will be the end point of a halfedge which\n        // does not match the start point of the following halfedge\n        halfedges = cell.halfedges;\n        nHalfedges = halfedges.length;\n        // special case: only one site, in which case, the viewport is the cell\n        // ...\n\n        // all other cases\n        iLeft = 0;\n        while (iLeft < nHalfedges) {\n            va = halfedges[iLeft].getEndpoint();\n            vz = halfedges[(iLeft+1) % nHalfedges].getStartpoint();\n            // if end point is not equal to start point, we need to add the missing\n            // halfedge(s) up to vz\n            if (abs_fn(va.x-vz.x)>=1e-9 || abs_fn(va.y-vz.y)>=1e-9) {\n\n                // rhill 2013-12-02:\n                // \"Holes\" in the halfedges are not necessarily always adjacent.\n                // https://github.com/gorhill/Javascript-Voronoi/issues/16\n\n                // find entry point:\n                switch (true) {\n\n                    // walk downward along left side\n                    case this.equalWithEpsilon(va.x,xl) && this.lessThanWithEpsilon(va.y,yb):\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xl);\n                        vb = this.createVertex(xl, lastBorderSegment ? vz.y : yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                    // walk rightward along bottom side\n                    case this.equalWithEpsilon(va.y,yb) && this.lessThanWithEpsilon(va.x,xr):\n                        lastBorderSegment = this.equalWithEpsilon(vz.y,yb);\n                        vb = this.createVertex(lastBorderSegment ? vz.x : xr, yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                    // walk upward along right side\n                    case this.equalWithEpsilon(va.x,xr) && this.greaterThanWithEpsilon(va.y,yt):\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xr);\n                        vb = this.createVertex(xr, lastBorderSegment ? vz.y : yt);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                    // walk leftward along top side\n                    case this.equalWithEpsilon(va.y,yt) && this.greaterThanWithEpsilon(va.x,xl):\n                        lastBorderSegment = this.equalWithEpsilon(vz.y,yt);\n                        vb = this.createVertex(lastBorderSegment ? vz.x : xl, yt);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                        // walk downward along left side\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xl);\n                        vb = this.createVertex(xl, lastBorderSegment ? vz.y : yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                        // walk rightward along bottom side\n                        lastBorderSegment = this.equalWithEpsilon(vz.y,yb);\n                        vb = this.createVertex(lastBorderSegment ? vz.x : xr, yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                        // walk upward along right side\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xr);\n                        vb = this.createVertex(xr, lastBorderSegment ? vz.y : yt);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        // fall through\n\n                    default:\n                        throw \"Voronoi.closeCells() > this makes no sense!\";\n                    }\n                }\n            iLeft++;\n            }\n        cell.closeMe = false;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Debugging helper\n/*\nVoronoi.prototype.dumpBeachline = function(y) {\n    console.log('Voronoi.dumpBeachline(%f) > Beachsections, from left to right:', y);\n    if ( !this.beachline ) {\n        console.log('  None');\n        }\n    else {\n        var bs = this.beachline.getFirst(this.beachline.root);\n        while ( bs ) {\n            console.log('  site %d: xl: %f, xr: %f', bs.site.voronoiId, this.leftBreakPoint(bs, y), this.rightBreakPoint(bs, y));\n            bs = bs.rbNext;\n            }\n        }\n    };\n*/\n\n// ---------------------------------------------------------------------------\n// Helper: Quantize sites\n\n// rhill 2013-10-12:\n// This is to solve https://github.com/gorhill/Javascript-Voronoi/issues/15\n// Since not all users will end up using the kind of coord values which would\n// cause the issue to arise, I chose to let the user decide whether or not\n// he should sanitize his coord values through this helper. This way, for\n// those users who uses coord values which are known to be fine, no overhead is\n// added.\n\nVoronoi.prototype.quantizeSites = function(sites) {\n    var ε = this.ε,\n        n = sites.length,\n        site;\n    while ( n-- ) {\n        site = sites[n];\n        site.x = Math.floor(site.x / ε) * ε;\n        site.y = Math.floor(site.y / ε) * ε;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Helper: Recycle diagram: all vertex, edge and cell objects are\n// \"surrendered\" to the Voronoi object for reuse.\n// TODO: rhill-voronoi-core v2: more performance to be gained\n// when I change the semantic of what is returned.\n\nVoronoi.prototype.recycle = function(diagram) {\n    if ( diagram ) {\n        if ( diagram instanceof this.Diagram ) {\n            this.toRecycle = diagram;\n            }\n        else {\n            throw 'Voronoi.recycleDiagram() > Need a Diagram object.';\n            }\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Top-level Fortune loop\n\n// rhill 2011-05-19:\n//   Voronoi sites are kept client-side now, to allow\n//   user to freely modify content. At compute time,\n//   *references* to sites are copied locally.\n\nVoronoi.prototype.compute = function(sites, bbox) {\n    // to measure execution time\n    var startTime = new Date();\n\n    // init internal state\n    this.reset();\n\n    // any diagram data available for recycling?\n    // I do that here so that this is included in execution time\n    if ( this.toRecycle ) {\n        this.vertexJunkyard = this.vertexJunkyard.concat(this.toRecycle.vertices);\n        this.edgeJunkyard = this.edgeJunkyard.concat(this.toRecycle.edges);\n        this.cellJunkyard = this.cellJunkyard.concat(this.toRecycle.cells);\n        this.toRecycle = null;\n        }\n\n    // Initialize site event queue\n    var siteEvents = sites.slice(0);\n    siteEvents.sort(function(a,b){\n        var r = b.y - a.y;\n        if (r) {return r;}\n        return b.x - a.x;\n        });\n\n    // process queue\n    var site = siteEvents.pop(),\n        siteid = 0,\n        xsitex, // to avoid duplicate sites\n        xsitey,\n        cells = this.cells,\n        circle;\n\n    // main loop\n    for (;;) {\n        // we need to figure whether we handle a site or circle event\n        // for this we find out if there is a site event and it is\n        // 'earlier' than the circle event\n        circle = this.firstCircleEvent;\n\n        // add beach section\n        if (site && (!circle || site.y < circle.y || (site.y === circle.y && site.x < circle.x))) {\n            // only if site is not a duplicate\n            if (site.x !== xsitex || site.y !== xsitey) {\n                // first create cell for new site\n                cells[siteid] = this.createCell(site);\n                site.voronoiId = siteid++;\n                // then create a beachsection for that site\n                this.addBeachsection(site);\n                // remember last site coords to detect duplicate\n                xsitey = site.y;\n                xsitex = site.x;\n                }\n            site = siteEvents.pop();\n            }\n\n        // remove beach section\n        else if (circle) {\n            this.removeBeachsection(circle.arc);\n            }\n\n        // all done, quit\n        else {\n            break;\n            }\n        }\n\n    // wrapping-up:\n    //   connect dangling edges to bounding box\n    //   cut edges as per bounding box\n    //   discard edges completely outside bounding box\n    //   discard edges which are point-like\n    this.clipEdges(bbox);\n\n    //   add missing edges in order to close opened cells\n    this.closeCells(bbox);\n\n    // to measure execution time\n    var stopTime = new Date();\n\n    // prepare return values\n    var diagram = new this.Diagram();\n    diagram.cells = this.cells;\n    diagram.edges = this.edges;\n    diagram.vertices = this.vertices;\n    diagram.execTime = stopTime.getTime()-startTime.getTime();\n\n    // clean up\n    this.reset();\n\n    return diagram;\n    };\n\nif(typeof module !== 'undefined') module.exports = Voronoi;\n","module.exports = function (points,signed) {\n  var l = points.length\n  var det = 0\n  var isSigned = signed || false\n\n  points = points.map(normalize)\n  if (points[0] != points[points.length -1])  \n    points = points.concat(points[0])\n\n  for (var i = 0; i < l; i++)\n    det += points[i].x * points[i + 1].y\n      - points[i].y * points[i + 1].x\n  if (isSigned)\n    return det / 2\n  else\n    return Math.abs(det) / 2\n}\n\nfunction normalize(point) {\n  if (Array.isArray(point))\n    return {\n      x: point[0],\n      y: point[1]\n    }\n  else\n    return point\n}\n","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n\n//\n// used strictly for logging the processing of the algorithm... only useful if you intend on\n// looking under the covers (for pretty UI's or debugging)\n//\n\nfunction BuildLog(){\n\tvar my;\n\tvar nextSegmentId = 0;\n\tvar curVert = false;\n\n\tfunction push(type, data){\n\t\tmy.list.push({\n\t\t\ttype: type,\n\t\t\tdata: data ? JSON.parse(JSON.stringify(data)) : void 0\n\t\t});\n\t\treturn my;\n\t}\n\n\tmy = {\n\t\tlist: [],\n\t\tsegmentId: function(){\n\t\t\treturn nextSegmentId++;\n\t\t},\n\t\tcheckIntersection: function(seg1, seg2){\n\t\t\treturn push('check', { seg1: seg1, seg2: seg2 });\n\t\t},\n\t\tsegmentChop: function(seg, end){\n\t\t\tpush('div_seg', { seg: seg, pt: end });\n\t\t\treturn push('chop', { seg: seg, pt: end });\n\t\t},\n\t\tstatusRemove: function(seg){\n\t\t\treturn push('pop_seg', { seg: seg });\n\t\t},\n\t\tsegmentUpdate: function(seg){\n\t\t\treturn push('seg_update', { seg: seg });\n\t\t},\n\t\tsegmentNew: function(seg, primary){\n\t\t\treturn push('new_seg', { seg: seg, primary: primary });\n\t\t},\n\t\tsegmentRemove: function(seg){\n\t\t\treturn push('rem_seg', { seg: seg });\n\t\t},\n\t\ttempStatus: function(seg, above, below){\n\t\t\treturn push('temp_status', { seg: seg, above: above, below: below });\n\t\t},\n\t\trewind: function(seg){\n\t\t\treturn push('rewind', { seg: seg });\n\t\t},\n\t\tstatus: function(seg, above, below){\n\t\t\treturn push('status', { seg: seg, above: above, below: below });\n\t\t},\n\t\tvert: function(x){\n\t\t\tif (x === curVert)\n\t\t\t\treturn my;\n\t\t\tcurVert = x;\n\t\t\treturn push('vert', { x: x });\n\t\t},\n\t\tlog: function(data){\n\t\t\tif (typeof data !== 'string')\n\t\t\t\tdata = JSON.stringify(data, false, '  ');\n\t\t\treturn push('log', { txt: data });\n\t\t},\n\t\treset: function(){\n\t\t\treturn push('reset');\n\t\t},\n\t\tselected: function(segs){\n\t\t\treturn push('selected', { segs: segs });\n\t\t},\n\t\tchainStart: function(seg){\n\t\t\treturn push('chain_start', { seg: seg });\n\t\t},\n\t\tchainRemoveHead: function(index, pt){\n\t\t\treturn push('chain_rem_head', { index: index, pt: pt });\n\t\t},\n\t\tchainRemoveTail: function(index, pt){\n\t\t\treturn push('chain_rem_tail', { index: index, pt: pt });\n\t\t},\n\t\tchainNew: function(pt1, pt2){\n\t\t\treturn push('chain_new', { pt1: pt1, pt2: pt2 });\n\t\t},\n\t\tchainMatch: function(index){\n\t\t\treturn push('chain_match', { index: index });\n\t\t},\n\t\tchainClose: function(index){\n\t\t\treturn push('chain_close', { index: index });\n\t\t},\n\t\tchainAddHead: function(index, pt){\n\t\t\treturn push('chain_add_head', { index: index, pt: pt });\n\t\t},\n\t\tchainAddTail: function(index, pt){\n\t\t\treturn push('chain_add_tail', { index: index, pt: pt, });\n\t\t},\n\t\tchainConnect: function(index1, index2){\n\t\t\treturn push('chain_con', { index1: index1, index2: index2 });\n\t\t},\n\t\tchainReverse: function(index){\n\t\t\treturn push('chain_rev', { index: index });\n\t\t},\n\t\tchainJoin: function(index1, index2){\n\t\t\treturn push('chain_join', { index1: index1, index2: index2 });\n\t\t},\n\t\tdone: function(){\n\t\t\treturn push('done');\n\t\t}\n\t};\n\treturn my;\n}\n\nmodule.exports = BuildLog;\n","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n\n//\n// provides the raw computation functions that takes epsilon into account\n//\n// zero is defined to be between (-epsilon, epsilon) exclusive\n//\n\nfunction Epsilon(eps){\n\tif (typeof eps !== 'number')\n\t\teps = 0.0000000001; // sane default? sure why not\n\tvar my = {\n\t\tepsilon: function(v){\n\t\t\tif (typeof v === 'number')\n\t\t\t\teps = v;\n\t\t\treturn eps;\n\t\t},\n\t\tpointAboveOrOnLine: function(pt, left, right){\n\t\t\tvar Ax = left[0];\n\t\t\tvar Ay = left[1];\n\t\t\tvar Bx = right[0];\n\t\t\tvar By = right[1];\n\t\t\tvar Cx = pt[0];\n\t\t\tvar Cy = pt[1];\n\t\t\treturn (Bx - Ax) * (Cy - Ay) - (By - Ay) * (Cx - Ax) >= -eps;\n\t\t},\n\t\tpointBetween: function(p, left, right){\n\t\t\t// p must be collinear with left->right\n\t\t\t// returns false if p == left, p == right, or left == right\n\t\t\tvar d_py_ly = p[1] - left[1];\n\t\t\tvar d_rx_lx = right[0] - left[0];\n\t\t\tvar d_px_lx = p[0] - left[0];\n\t\t\tvar d_ry_ly = right[1] - left[1];\n\n\t\t\tvar dot = d_px_lx * d_rx_lx + d_py_ly * d_ry_ly;\n\t\t\t// if `dot` is 0, then `p` == `left` or `left` == `right` (reject)\n\t\t\t// if `dot` is less than 0, then `p` is to the left of `left` (reject)\n\t\t\tif (dot < eps)\n\t\t\t\treturn false;\n\n\t\t\tvar sqlen = d_rx_lx * d_rx_lx + d_ry_ly * d_ry_ly;\n\t\t\t// if `dot` > `sqlen`, then `p` is to the right of `right` (reject)\n\t\t\t// therefore, if `dot - sqlen` is greater than 0, then `p` is to the right of `right` (reject)\n\t\t\tif (dot - sqlen > -eps)\n\t\t\t\treturn false;\n\n\t\t\treturn true;\n\t\t},\n\t\tpointsSameX: function(p1, p2){\n\t\t\treturn Math.abs(p1[0] - p2[0]) < eps;\n\t\t},\n\t\tpointsSameY: function(p1, p2){\n\t\t\treturn Math.abs(p1[1] - p2[1]) < eps;\n\t\t},\n\t\tpointsSame: function(p1, p2){\n\t\t\treturn my.pointsSameX(p1, p2) && my.pointsSameY(p1, p2);\n\t\t},\n\t\tpointsCompare: function(p1, p2){\n\t\t\t// returns -1 if p1 is smaller, 1 if p2 is smaller, 0 if equal\n\t\t\tif (my.pointsSameX(p1, p2))\n\t\t\t\treturn my.pointsSameY(p1, p2) ? 0 : (p1[1] < p2[1] ? -1 : 1);\n\t\t\treturn p1[0] < p2[0] ? -1 : 1;\n\t\t},\n\t\tpointsCollinear: function(pt1, pt2, pt3){\n\t\t\t// does pt1->pt2->pt3 make a straight line?\n\t\t\t// essentially this is just checking to see if the slope(pt1->pt2) === slope(pt2->pt3)\n\t\t\t// if slopes are equal, then they must be collinear, because they share pt2\n\t\t\tvar dx1 = pt1[0] - pt2[0];\n\t\t\tvar dy1 = pt1[1] - pt2[1];\n\t\t\tvar dx2 = pt2[0] - pt3[0];\n\t\t\tvar dy2 = pt2[1] - pt3[1];\n\t\t\treturn Math.abs(dx1 * dy2 - dx2 * dy1) < eps;\n\t\t},\n\t\tlinesIntersect: function(a0, a1, b0, b1){\n\t\t\t// returns false if the lines are coincident (e.g., parallel or on top of each other)\n\t\t\t//\n\t\t\t// returns an object if the lines intersect:\n\t\t\t//   {\n\t\t\t//     pt: [x, y],    where the intersection point is at\n\t\t\t//     alongA: where intersection point is along A,\n\t\t\t//     alongB: where intersection point is along B\n\t\t\t//   }\n\t\t\t//\n\t\t\t//  alongA and alongB will each be one of: -2, -1, 0, 1, 2\n\t\t\t//\n\t\t\t//  with the following meaning:\n\t\t\t//\n\t\t\t//    -2   intersection point is before segment's first point\n\t\t\t//    -1   intersection point is directly on segment's first point\n\t\t\t//     0   intersection point is between segment's first and second points (exclusive)\n\t\t\t//     1   intersection point is directly on segment's second point\n\t\t\t//     2   intersection point is after segment's second point\n\t\t\tvar adx = a1[0] - a0[0];\n\t\t\tvar ady = a1[1] - a0[1];\n\t\t\tvar bdx = b1[0] - b0[0];\n\t\t\tvar bdy = b1[1] - b0[1];\n\n\t\t\tvar axb = adx * bdy - ady * bdx;\n\t\t\tif (Math.abs(axb) < eps)\n\t\t\t\treturn false; // lines are coincident\n\n\t\t\tvar dx = a0[0] - b0[0];\n\t\t\tvar dy = a0[1] - b0[1];\n\n\t\t\tvar A = (bdx * dy - bdy * dx) / axb;\n\t\t\tvar B = (adx * dy - ady * dx) / axb;\n\n\t\t\tvar ret = {\n\t\t\t\talongA: 0,\n\t\t\t\talongB: 0,\n\t\t\t\tpt: [\n\t\t\t\t\ta0[0] + A * adx,\n\t\t\t\t\ta0[1] + A * ady\n\t\t\t\t]\n\t\t\t};\n\n\t\t\t// categorize where intersection point is along A and B\n\n\t\t\tif (A <= -eps)\n\t\t\t\tret.alongA = -2;\n\t\t\telse if (A < eps)\n\t\t\t\tret.alongA = -1;\n\t\t\telse if (A - 1 <= -eps)\n\t\t\t\tret.alongA = 0;\n\t\t\telse if (A - 1 < eps)\n\t\t\t\tret.alongA = 1;\n\t\t\telse\n\t\t\t\tret.alongA = 2;\n\n\t\t\tif (B <= -eps)\n\t\t\t\tret.alongB = -2;\n\t\t\telse if (B < eps)\n\t\t\t\tret.alongB = -1;\n\t\t\telse if (B - 1 <= -eps)\n\t\t\t\tret.alongB = 0;\n\t\t\telse if (B - 1 < eps)\n\t\t\t\tret.alongB = 1;\n\t\t\telse\n\t\t\t\tret.alongB = 2;\n\n\t\t\treturn ret;\n\t\t},\n\t\tpointInsideRegion: function(pt, region){\n\t\t\tvar x = pt[0];\n\t\t\tvar y = pt[1];\n\t\t\tvar last_x = region[region.length - 1][0];\n\t\t\tvar last_y = region[region.length - 1][1];\n\t\t\tvar inside = false;\n\t\t\tfor (var i = 0; i < region.length; i++){\n\t\t\t\tvar curr_x = region[i][0];\n\t\t\t\tvar curr_y = region[i][1];\n\n\t\t\t\t// if y is between curr_y and last_y, and\n\t\t\t\t// x is to the right of the boundary created by the line\n\t\t\t\tif ((curr_y - y > eps) != (last_y - y > eps) &&\n\t\t\t\t\t(last_x - curr_x) * (y - curr_y) / (last_y - curr_y) + curr_x - x > eps)\n\t\t\t\t\tinside = !inside\n\n\t\t\t\tlast_x = curr_x;\n\t\t\t\tlast_y = curr_y;\n\t\t\t}\n\t\t\treturn inside;\n\t\t}\n\t};\n\treturn my;\n}\n\nmodule.exports = Epsilon;\n","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n\n//\n// simple linked list implementation that allows you to traverse down nodes and save positions\n//\n\nvar LinkedList = {\n\tcreate: function(){\n\t\tvar my = {\n\t\t\troot: { root: true, next: null },\n\t\t\texists: function(node){\n\t\t\t\tif (node === null || node === my.root)\n\t\t\t\t\treturn false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tisEmpty: function(){\n\t\t\t\treturn my.root.next === null;\n\t\t\t},\n\t\t\tgetHead: function(){\n\t\t\t\treturn my.root.next;\n\t\t\t},\n\t\t\tinsertBefore: function(node, check){\n\t\t\t\tvar last = my.root;\n\t\t\t\tvar here = my.root.next;\n\t\t\t\twhile (here !== null){\n\t\t\t\t\tif (check(here)){\n\t\t\t\t\t\tnode.prev = here.prev;\n\t\t\t\t\t\tnode.next = here;\n\t\t\t\t\t\there.prev.next = node;\n\t\t\t\t\t\there.prev = node;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlast = here;\n\t\t\t\t\there = here.next;\n\t\t\t\t}\n\t\t\t\tlast.next = node;\n\t\t\t\tnode.prev = last;\n\t\t\t\tnode.next = null;\n\t\t\t},\n\t\t\tfindTransition: function(check){\n\t\t\t\tvar prev = my.root;\n\t\t\t\tvar here = my.root.next;\n\t\t\t\twhile (here !== null){\n\t\t\t\t\tif (check(here))\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tprev = here;\n\t\t\t\t\there = here.next;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tbefore: prev === my.root ? null : prev,\n\t\t\t\t\tafter: here,\n\t\t\t\t\tinsert: function(node){\n\t\t\t\t\t\tnode.prev = prev;\n\t\t\t\t\t\tnode.next = here;\n\t\t\t\t\t\tprev.next = node;\n\t\t\t\t\t\tif (here !== null)\n\t\t\t\t\t\t\there.prev = node;\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\treturn my;\n\t},\n\tnode: function(data){\n\t\tdata.prev = null;\n\t\tdata.next = null;\n\t\tdata.remove = function(){\n\t\t\tdata.prev.next = data.next;\n\t\t\tif (data.next)\n\t\t\t\tdata.next.prev = data.prev;\n\t\t\tdata.prev = null;\n\t\t\tdata.next = null;\n\t\t};\n\t\treturn data;\n\t}\n};\n\nmodule.exports = LinkedList;\n","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n\n//\n// this is the core work-horse\n//\n\nvar LinkedList = require('./linked-list');\n\nfunction Intersecter(selfIntersection, eps, buildLog){\n\t// selfIntersection is true/false depending on the phase of the overall algorithm\n\n\t//\n\t// segment creation\n\t//\n\n\tfunction segmentNew(start, end){\n\t\treturn {\n\t\t\tid: buildLog ? buildLog.segmentId() : -1,\n\t\t\tstart: start,\n\t\t\tend: end,\n\t\t\tmyFill: {\n\t\t\t\tabove: null, // is there fill above us?\n\t\t\t\tbelow: null  // is there fill below us?\n\t\t\t},\n\t\t\totherFill: null\n\t\t};\n\t}\n\n\tfunction segmentCopy(start, end, seg){\n\t\treturn {\n\t\t\tid: buildLog ? buildLog.segmentId() : -1,\n\t\t\tstart: start,\n\t\t\tend: end,\n\t\t\tmyFill: {\n\t\t\t\tabove: seg.myFill.above,\n\t\t\t\tbelow: seg.myFill.below\n\t\t\t},\n\t\t\totherFill: null\n\t\t};\n\t}\n\n\t//\n\t// event logic\n\t//\n\n\tvar event_root = LinkedList.create();\n\n\tfunction eventCompare(p1_isStart, p1_1, p1_2, p2_isStart, p2_1, p2_2){\n\t\t// compare the selected points first\n\t\tvar comp = eps.pointsCompare(p1_1, p2_1);\n\t\tif (comp !== 0)\n\t\t\treturn comp;\n\t\t// the selected points are the same\n\n\t\tif (eps.pointsSame(p1_2, p2_2)) // if the non-selected points are the same too...\n\t\t\treturn 0; // then the segments are equal\n\n\t\tif (p1_isStart !== p2_isStart) // if one is a start and the other isn't...\n\t\t\treturn p1_isStart ? 1 : -1; // favor the one that isn't the start\n\n\t\t// otherwise, we'll have to calculate which one is below the other manually\n\t\treturn eps.pointAboveOrOnLine(p1_2,\n\t\t\tp2_isStart ? p2_1 : p2_2, // order matters\n\t\t\tp2_isStart ? p2_2 : p2_1\n\t\t) ? 1 : -1;\n\t}\n\n\tfunction eventAdd(ev, other_pt){\n\t\tevent_root.insertBefore(ev, function(here){\n\t\t\t// should ev be inserted before here?\n\t\t\tvar comp = eventCompare(\n\t\t\t\tev  .isStart, ev  .pt,      other_pt,\n\t\t\t\there.isStart, here.pt, here.other.pt\n\t\t\t);\n\t\t\treturn comp < 0;\n\t\t});\n\t}\n\n\tfunction eventAddSegmentStart(seg, primary){\n\t\tvar ev_start = LinkedList.node({\n\t\t\tisStart: true,\n\t\t\tpt: seg.start,\n\t\t\tseg: seg,\n\t\t\tprimary: primary,\n\t\t\tother: null,\n\t\t\tstatus: null\n\t\t});\n\t\teventAdd(ev_start, seg.end);\n\t\treturn ev_start;\n\t}\n\n\tfunction eventAddSegmentEnd(ev_start, seg, primary){\n\t\tvar ev_end = LinkedList.node({\n\t\t\tisStart: false,\n\t\t\tpt: seg.end,\n\t\t\tseg: seg,\n\t\t\tprimary: primary,\n\t\t\tother: ev_start,\n\t\t\tstatus: null\n\t\t});\n\t\tev_start.other = ev_end;\n\t\teventAdd(ev_end, ev_start.pt);\n\t}\n\n\tfunction eventAddSegment(seg, primary){\n\t\tvar ev_start = eventAddSegmentStart(seg, primary);\n\t\teventAddSegmentEnd(ev_start, seg, primary);\n\t\treturn ev_start;\n\t}\n\n\tfunction eventUpdateEnd(ev, end){\n\t\t// slides an end backwards\n\t\t//   (start)------------(end)    to:\n\t\t//   (start)---(end)\n\n\t\tif (buildLog)\n\t\t\tbuildLog.segmentChop(ev.seg, end);\n\n\t\tev.other.remove();\n\t\tev.seg.end = end;\n\t\tev.other.pt = end;\n\t\teventAdd(ev.other, ev.pt);\n\t}\n\n\tfunction eventDivide(ev, pt){\n\t\tvar ns = segmentCopy(pt, ev.seg.end, ev.seg);\n\t\teventUpdateEnd(ev, pt);\n\t\treturn eventAddSegment(ns, ev.primary);\n\t}\n\n\tfunction calculate(primaryPolyInverted, secondaryPolyInverted){\n\t\t// if selfIntersection is true then there is no secondary polygon, so that isn't used\n\n\t\t//\n\t\t// status logic\n\t\t//\n\n\t\tvar status_root = LinkedList.create();\n\n\t\tfunction statusCompare(ev1, ev2){\n\t\t\tvar a1 = ev1.seg.start;\n\t\t\tvar a2 = ev1.seg.end;\n\t\t\tvar b1 = ev2.seg.start;\n\t\t\tvar b2 = ev2.seg.end;\n\n\t\t\tif (eps.pointsCollinear(a1, b1, b2)){\n\t\t\t\tif (eps.pointsCollinear(a2, b1, b2))\n\t\t\t\t\treturn 1;//eventCompare(true, a1, a2, true, b1, b2);\n\t\t\t\treturn eps.pointAboveOrOnLine(a2, b1, b2) ? 1 : -1;\n\t\t\t}\n\t\t\treturn eps.pointAboveOrOnLine(a1, b1, b2) ? 1 : -1;\n\t\t}\n\n\t\tfunction statusFindSurrounding(ev){\n\t\t\treturn status_root.findTransition(function(here){\n\t\t\t\tvar comp = statusCompare(ev, here.ev);\n\t\t\t\treturn comp > 0;\n\t\t\t});\n\t\t}\n\n\t\tfunction checkIntersection(ev1, ev2){\n\t\t\t// returns the segment equal to ev1, or false if nothing equal\n\n\t\t\tvar seg1 = ev1.seg;\n\t\t\tvar seg2 = ev2.seg;\n\t\t\tvar a1 = seg1.start;\n\t\t\tvar a2 = seg1.end;\n\t\t\tvar b1 = seg2.start;\n\t\t\tvar b2 = seg2.end;\n\n\t\t\tif (buildLog)\n\t\t\t\tbuildLog.checkIntersection(seg1, seg2);\n\n\t\t\tvar i = eps.linesIntersect(a1, a2, b1, b2);\n\n\t\t\tif (i === false){\n\t\t\t\t// segments are parallel or coincident\n\n\t\t\t\t// if points aren't collinear, then the segments are parallel, so no intersections\n\t\t\t\tif (!eps.pointsCollinear(a1, a2, b1))\n\t\t\t\t\treturn false;\n\t\t\t\t// otherwise, segments are on top of each other somehow (aka coincident)\n\n\t\t\t\tif (eps.pointsSame(a1, b2) || eps.pointsSame(a2, b1))\n\t\t\t\t\treturn false; // segments touch at endpoints... no intersection\n\n\t\t\t\tvar a1_equ_b1 = eps.pointsSame(a1, b1);\n\t\t\t\tvar a2_equ_b2 = eps.pointsSame(a2, b2);\n\n\t\t\t\tif (a1_equ_b1 && a2_equ_b2)\n\t\t\t\t\treturn ev2; // segments are exactly equal\n\n\t\t\t\tvar a1_between = !a1_equ_b1 && eps.pointBetween(a1, b1, b2);\n\t\t\t\tvar a2_between = !a2_equ_b2 && eps.pointBetween(a2, b1, b2);\n\n\t\t\t\t// handy for debugging:\n\t\t\t\t// buildLog.log({\n\t\t\t\t//\ta1_equ_b1: a1_equ_b1,\n\t\t\t\t//\ta2_equ_b2: a2_equ_b2,\n\t\t\t\t//\ta1_between: a1_between,\n\t\t\t\t//\ta2_between: a2_between\n\t\t\t\t// });\n\n\t\t\t\tif (a1_equ_b1){\n\t\t\t\t\tif (a2_between){\n\t\t\t\t\t\t//  (a1)---(a2)\n\t\t\t\t\t\t//  (b1)----------(b2)\n\t\t\t\t\t\teventDivide(ev2, a2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t//  (a1)----------(a2)\n\t\t\t\t\t\t//  (b1)---(b2)\n\t\t\t\t\t\teventDivide(ev1, b2);\n\t\t\t\t\t}\n\t\t\t\t\treturn ev2;\n\t\t\t\t}\n\t\t\t\telse if (a1_between){\n\t\t\t\t\tif (!a2_equ_b2){\n\t\t\t\t\t\t// make a2 equal to b2\n\t\t\t\t\t\tif (a2_between){\n\t\t\t\t\t\t\t//         (a1)---(a2)\n\t\t\t\t\t\t\t//  (b1)-----------------(b2)\n\t\t\t\t\t\t\teventDivide(ev2, a2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t//         (a1)----------(a2)\n\t\t\t\t\t\t\t//  (b1)----------(b2)\n\t\t\t\t\t\t\teventDivide(ev1, b2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//         (a1)---(a2)\n\t\t\t\t\t//  (b1)----------(b2)\n\t\t\t\t\teventDivide(ev2, a1);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\t// otherwise, lines intersect at i.pt, which may or may not be between the endpoints\n\n\t\t\t\t// is A divided between its endpoints? (exclusive)\n\t\t\t\tif (i.alongA === 0){\n\t\t\t\t\tif (i.alongB === -1) // yes, at exactly b1\n\t\t\t\t\t\teventDivide(ev1, b1);\n\t\t\t\t\telse if (i.alongB === 0) // yes, somewhere between B's endpoints\n\t\t\t\t\t\teventDivide(ev1, i.pt);\n\t\t\t\t\telse if (i.alongB === 1) // yes, at exactly b2\n\t\t\t\t\t\teventDivide(ev1, b2);\n\t\t\t\t}\n\n\t\t\t\t// is B divided between its endpoints? (exclusive)\n\t\t\t\tif (i.alongB === 0){\n\t\t\t\t\tif (i.alongA === -1) // yes, at exactly a1\n\t\t\t\t\t\teventDivide(ev2, a1);\n\t\t\t\t\telse if (i.alongA === 0) // yes, somewhere between A's endpoints (exclusive)\n\t\t\t\t\t\teventDivide(ev2, i.pt);\n\t\t\t\t\telse if (i.alongA === 1) // yes, at exactly a2\n\t\t\t\t\t\teventDivide(ev2, a2);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t//\n\t\t// main event loop\n\t\t//\n\t\tvar segments = [];\n\t\twhile (!event_root.isEmpty()){\n\t\t\tvar ev = event_root.getHead();\n\n\t\t\tif (buildLog)\n\t\t\t\tbuildLog.vert(ev.pt[0]);\n\n\t\t\tif (ev.isStart){\n\n\t\t\t\tif (buildLog)\n\t\t\t\t\tbuildLog.segmentNew(ev.seg, ev.primary);\n\n\t\t\t\tvar surrounding = statusFindSurrounding(ev);\n\t\t\t\tvar above = surrounding.before ? surrounding.before.ev : null;\n\t\t\t\tvar below = surrounding.after ? surrounding.after.ev : null;\n\n\t\t\t\tif (buildLog){\n\t\t\t\t\tbuildLog.tempStatus(\n\t\t\t\t\t\tev.seg,\n\t\t\t\t\t\tabove ? above.seg : false,\n\t\t\t\t\t\tbelow ? below.seg : false\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tfunction checkBothIntersections(){\n\t\t\t\t\tif (above){\n\t\t\t\t\t\tvar eve = checkIntersection(ev, above);\n\t\t\t\t\t\tif (eve)\n\t\t\t\t\t\t\treturn eve;\n\t\t\t\t\t}\n\t\t\t\t\tif (below)\n\t\t\t\t\t\treturn checkIntersection(ev, below);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar eve = checkBothIntersections();\n\t\t\t\tif (eve){\n\t\t\t\t\t// ev and eve are equal\n\t\t\t\t\t// we'll keep eve and throw away ev\n\n\t\t\t\t\t// merge ev.seg's fill information into eve.seg\n\n\t\t\t\t\tif (selfIntersection){\n\t\t\t\t\t\tvar toggle; // are we a toggling edge?\n\t\t\t\t\t\tif (ev.seg.myFill.below === null)\n\t\t\t\t\t\t\ttoggle = true;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttoggle = ev.seg.myFill.above !== ev.seg.myFill.below;\n\n\t\t\t\t\t\t// merge two segments that belong to the same polygon\n\t\t\t\t\t\t// think of this as sandwiching two segments together, where `eve.seg` is\n\t\t\t\t\t\t// the bottom -- this will cause the above fill flag to toggle\n\t\t\t\t\t\tif (toggle)\n\t\t\t\t\t\t\teve.seg.myFill.above = !eve.seg.myFill.above;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t// merge two segments that belong to different polygons\n\t\t\t\t\t\t// each segment has distinct knowledge, so no special logic is needed\n\t\t\t\t\t\t// note that this can only happen once per segment in this phase, because we\n\t\t\t\t\t\t// are guaranteed that all self-intersections are gone\n\t\t\t\t\t\teve.seg.otherFill = ev.seg.myFill;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (buildLog)\n\t\t\t\t\t\tbuildLog.segmentUpdate(eve.seg);\n\n\t\t\t\t\tev.other.remove();\n\t\t\t\t\tev.remove();\n\t\t\t\t}\n\n\t\t\t\tif (event_root.getHead() !== ev){\n\t\t\t\t\t// something was inserted before us in the event queue, so loop back around and\n\t\t\t\t\t// process it before continuing\n\t\t\t\t\tif (buildLog)\n\t\t\t\t\t\tbuildLog.rewind(ev.seg);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t// calculate fill flags\n\t\t\t\t//\n\t\t\t\tif (selfIntersection){\n\t\t\t\t\tvar toggle; // are we a toggling edge?\n\t\t\t\t\tif (ev.seg.myFill.below === null) // if we are a new segment...\n\t\t\t\t\t\ttoggle = true; // then we toggle\n\t\t\t\t\telse // we are a segment that has previous knowledge from a division\n\t\t\t\t\t\ttoggle = ev.seg.myFill.above !== ev.seg.myFill.below; // calculate toggle\n\n\t\t\t\t\t// next, calculate whether we are filled below us\n\t\t\t\t\tif (!below){ // if nothing is below us...\n\t\t\t\t\t\t// we are filled below us if the polygon is inverted\n\t\t\t\t\t\tev.seg.myFill.below = primaryPolyInverted;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t// otherwise, we know the answer -- it's the same if whatever is below\n\t\t\t\t\t\t// us is filled above it\n\t\t\t\t\t\tev.seg.myFill.below = below.seg.myFill.above;\n\t\t\t\t\t}\n\n\t\t\t\t\t// since now we know if we're filled below us, we can calculate whether\n\t\t\t\t\t// we're filled above us by applying toggle to whatever is below us\n\t\t\t\t\tif (toggle)\n\t\t\t\t\t\tev.seg.myFill.above = !ev.seg.myFill.below;\n\t\t\t\t\telse\n\t\t\t\t\t\tev.seg.myFill.above = ev.seg.myFill.below;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// now we fill in any missing transition information, since we are all-knowing\n\t\t\t\t\t// at this point\n\n\t\t\t\t\tif (ev.seg.otherFill === null){\n\t\t\t\t\t\t// if we don't have other information, then we need to figure out if we're\n\t\t\t\t\t\t// inside the other polygon\n\t\t\t\t\t\tvar inside;\n\t\t\t\t\t\tif (!below){\n\t\t\t\t\t\t\t// if nothing is below us, then we're inside if the other polygon is\n\t\t\t\t\t\t\t// inverted\n\t\t\t\t\t\t\tinside =\n\t\t\t\t\t\t\t\tev.primary ? secondaryPolyInverted : primaryPolyInverted;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{ // otherwise, something is below us\n\t\t\t\t\t\t\t// so copy the below segment's other polygon's above\n\t\t\t\t\t\t\tif (ev.primary === below.primary)\n\t\t\t\t\t\t\t\tinside = below.seg.otherFill.above;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tinside = below.seg.myFill.above;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tev.seg.otherFill = {\n\t\t\t\t\t\t\tabove: inside,\n\t\t\t\t\t\t\tbelow: inside\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (buildLog){\n\t\t\t\t\tbuildLog.status(\n\t\t\t\t\t\tev.seg,\n\t\t\t\t\t\tabove ? above.seg : false,\n\t\t\t\t\t\tbelow ? below.seg : false\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// insert the status and remember it for later removal\n\t\t\t\tev.other.status = surrounding.insert(LinkedList.node({ ev: ev }));\n\t\t\t}\n\t\t\telse{\n\t\t\t\tvar st = ev.status;\n\n\t\t\t\tif (st === null){\n\t\t\t\t\tthrow new Error('PolyBool: Zero-length segment detected; your epsilon is ' +\n\t\t\t\t\t\t'probably too small or too large');\n\t\t\t\t}\n\n\t\t\t\t// removing the status will create two new adjacent edges, so we'll need to check\n\t\t\t\t// for those\n\t\t\t\tif (status_root.exists(st.prev) && status_root.exists(st.next))\n\t\t\t\t\tcheckIntersection(st.prev.ev, st.next.ev);\n\n\t\t\t\tif (buildLog)\n\t\t\t\t\tbuildLog.statusRemove(st.ev.seg);\n\n\t\t\t\t// remove the status\n\t\t\t\tst.remove();\n\n\t\t\t\t// if we've reached this point, we've calculated everything there is to know, so\n\t\t\t\t// save the segment for reporting\n\t\t\t\tif (!ev.primary){\n\t\t\t\t\t// make sure `seg.myFill` actually points to the primary polygon though\n\t\t\t\t\tvar s = ev.seg.myFill;\n\t\t\t\t\tev.seg.myFill = ev.seg.otherFill;\n\t\t\t\t\tev.seg.otherFill = s;\n\t\t\t\t}\n\t\t\t\tsegments.push(ev.seg);\n\t\t\t}\n\n\t\t\t// remove the event and continue\n\t\t\tevent_root.getHead().remove();\n\t\t}\n\n\t\tif (buildLog)\n\t\t\tbuildLog.done();\n\n\t\treturn segments;\n\t}\n\n\t// return the appropriate API depending on what we're doing\n\tif (!selfIntersection){\n\t\t// performing combination of polygons, so only deal with already-processed segments\n\t\treturn {\n\t\t\tcalculate: function(segments1, inverted1, segments2, inverted2){\n\t\t\t\t// segmentsX come from the self-intersection API, or this API\n\t\t\t\t// invertedX is whether we treat that list of segments as an inverted polygon or not\n\t\t\t\t// returns segments that can be used for further operations\n\t\t\t\tsegments1.forEach(function(seg){\n\t\t\t\t\teventAddSegment(segmentCopy(seg.start, seg.end, seg), true);\n\t\t\t\t});\n\t\t\t\tsegments2.forEach(function(seg){\n\t\t\t\t\teventAddSegment(segmentCopy(seg.start, seg.end, seg), false);\n\t\t\t\t});\n\t\t\t\treturn calculate(inverted1, inverted2);\n\t\t\t}\n\t\t};\n\t}\n\n\t// otherwise, performing self-intersection, so deal with regions\n\treturn {\n\t\taddRegion: function(region){\n\t\t\t// regions are a list of points:\n\t\t\t//  [ [0, 0], [100, 0], [50, 100] ]\n\t\t\t// you can add multiple regions before running calculate\n\t\t\tvar pt1;\n\t\t\tvar pt2 = region[region.length - 1];\n\t\t\tfor (var i = 0; i < region.length; i++){\n\t\t\t\tpt1 = pt2;\n\t\t\t\tpt2 = region[i];\n\n\t\t\t\tvar forward = eps.pointsCompare(pt1, pt2);\n\t\t\t\tif (forward === 0) // points are equal, so we have a zero-length segment\n\t\t\t\t\tcontinue; // just skip it\n\n\t\t\t\teventAddSegment(\n\t\t\t\t\tsegmentNew(\n\t\t\t\t\t\tforward < 0 ? pt1 : pt2,\n\t\t\t\t\t\tforward < 0 ? pt2 : pt1\n\t\t\t\t\t),\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tcalculate: function(inverted){\n\t\t\t// is the polygon inverted?\n\t\t\t// returns segments\n\t\t\treturn calculate(inverted, false);\n\t\t}\n\t};\n}\n\nmodule.exports = Intersecter;\n","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n\n//\n// converts a list of segments into a list of regions, while also removing unnecessary verticies\n//\n\nfunction SegmentChainer(segments, eps, buildLog){\n\tvar chains = [];\n\tvar regions = [];\n\n\tsegments.forEach(function(seg){\n\t\tvar pt1 = seg.start;\n\t\tvar pt2 = seg.end;\n\t\tif (eps.pointsSame(pt1, pt2)){\n\t\t\tconsole.warn('PolyBool: Warning: Zero-length segment detected; your epsilon is ' +\n\t\t\t\t'probably too small or too large');\n\t\t\treturn;\n\t\t}\n\n\t\tif (buildLog)\n\t\t\tbuildLog.chainStart(seg);\n\n\t\t// search for two chains that this segment matches\n\t\tvar first_match = {\n\t\t\tindex: 0,\n\t\t\tmatches_head: false,\n\t\t\tmatches_pt1: false\n\t\t};\n\t\tvar second_match = {\n\t\t\tindex: 0,\n\t\t\tmatches_head: false,\n\t\t\tmatches_pt1: false\n\t\t};\n\t\tvar next_match = first_match;\n\t\tfunction setMatch(index, matches_head, matches_pt1){\n\t\t\t// return true if we've matched twice\n\t\t\tnext_match.index = index;\n\t\t\tnext_match.matches_head = matches_head;\n\t\t\tnext_match.matches_pt1 = matches_pt1;\n\t\t\tif (next_match === first_match){\n\t\t\t\tnext_match = second_match;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tnext_match = null;\n\t\t\treturn true; // we've matched twice, we're done here\n\t\t}\n\t\tfor (var i = 0; i < chains.length; i++){\n\t\t\tvar chain = chains[i];\n\t\t\tvar head  = chain[0];\n\t\t\tvar head2 = chain[1];\n\t\t\tvar tail  = chain[chain.length - 1];\n\t\t\tvar tail2 = chain[chain.length - 2];\n\t\t\tif (eps.pointsSame(head, pt1)){\n\t\t\t\tif (setMatch(i, true, true))\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (eps.pointsSame(head, pt2)){\n\t\t\t\tif (setMatch(i, true, false))\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (eps.pointsSame(tail, pt1)){\n\t\t\t\tif (setMatch(i, false, true))\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (eps.pointsSame(tail, pt2)){\n\t\t\t\tif (setMatch(i, false, false))\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (next_match === first_match){\n\t\t\t// we didn't match anything, so create a new chain\n\t\t\tchains.push([ pt1, pt2 ]);\n\t\t\tif (buildLog)\n\t\t\t\tbuildLog.chainNew(pt1, pt2);\n\t\t\treturn;\n\t\t}\n\n\t\tif (next_match === second_match){\n\t\t\t// we matched a single chain\n\n\t\t\tif (buildLog)\n\t\t\t\tbuildLog.chainMatch(first_match.index);\n\n\t\t\t// add the other point to the apporpriate end, and check to see if we've closed the\n\t\t\t// chain into a loop\n\n\t\t\tvar index = first_match.index;\n\t\t\tvar pt = first_match.matches_pt1 ? pt2 : pt1; // if we matched pt1, then we add pt2, etc\n\t\t\tvar addToHead = first_match.matches_head; // if we matched at head, then add to the head\n\n\t\t\tvar chain = chains[index];\n\t\t\tvar grow  = addToHead ? chain[0] : chain[chain.length - 1];\n\t\t\tvar grow2 = addToHead ? chain[1] : chain[chain.length - 2];\n\t\t\tvar oppo  = addToHead ? chain[chain.length - 1] : chain[0];\n\t\t\tvar oppo2 = addToHead ? chain[chain.length - 2] : chain[1];\n\n\t\t\tif (eps.pointsCollinear(grow2, grow, pt)){\n\t\t\t\t// grow isn't needed because it's directly between grow2 and pt:\n\t\t\t\t// grow2 ---grow---> pt\n\t\t\t\tif (addToHead){\n\t\t\t\t\tif (buildLog)\n\t\t\t\t\t\tbuildLog.chainRemoveHead(first_match.index, pt);\n\t\t\t\t\tchain.shift();\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif (buildLog)\n\t\t\t\t\t\tbuildLog.chainRemoveTail(first_match.index, pt);\n\t\t\t\t\tchain.pop();\n\t\t\t\t}\n\t\t\t\tgrow = grow2; // old grow is gone... new grow is what grow2 was\n\t\t\t}\n\n\t\t\tif (eps.pointsSame(oppo, pt)){\n\t\t\t\t// we're closing the loop, so remove chain from chains\n\t\t\t\tchains.splice(index, 1);\n\n\t\t\t\tif (eps.pointsCollinear(oppo2, oppo, grow)){\n\t\t\t\t\t// oppo isn't needed because it's directly between oppo2 and grow:\n\t\t\t\t\t// oppo2 ---oppo--->grow\n\t\t\t\t\tif (addToHead){\n\t\t\t\t\t\tif (buildLog)\n\t\t\t\t\t\t\tbuildLog.chainRemoveTail(first_match.index, grow);\n\t\t\t\t\t\tchain.pop();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif (buildLog)\n\t\t\t\t\t\t\tbuildLog.chainRemoveHead(first_match.index, grow);\n\t\t\t\t\t\tchain.shift();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (buildLog)\n\t\t\t\t\tbuildLog.chainClose(first_match.index);\n\n\t\t\t\t// we have a closed chain!\n\t\t\t\tregions.push(chain);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// not closing a loop, so just add it to the apporpriate side\n\t\t\tif (addToHead){\n\t\t\t\tif (buildLog)\n\t\t\t\t\tbuildLog.chainAddHead(first_match.index, pt);\n\t\t\t\tchain.unshift(pt);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif (buildLog)\n\t\t\t\t\tbuildLog.chainAddTail(first_match.index, pt);\n\t\t\t\tchain.push(pt);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// otherwise, we matched two chains, so we need to combine those chains together\n\n\t\tfunction reverseChain(index){\n\t\t\tif (buildLog)\n\t\t\t\tbuildLog.chainReverse(index);\n\t\t\tchains[index].reverse(); // gee, that's easy\n\t\t}\n\n\t\tfunction appendChain(index1, index2){\n\t\t\t// index1 gets index2 appended to it, and index2 is removed\n\t\t\tvar chain1 = chains[index1];\n\t\t\tvar chain2 = chains[index2];\n\t\t\tvar tail  = chain1[chain1.length - 1];\n\t\t\tvar tail2 = chain1[chain1.length - 2];\n\t\t\tvar head  = chain2[0];\n\t\t\tvar head2 = chain2[1];\n\n\t\t\tif (eps.pointsCollinear(tail2, tail, head)){\n\t\t\t\t// tail isn't needed because it's directly between tail2 and head\n\t\t\t\t// tail2 ---tail---> head\n\t\t\t\tif (buildLog)\n\t\t\t\t\tbuildLog.chainRemoveTail(index1, tail);\n\t\t\t\tchain1.pop();\n\t\t\t\ttail = tail2; // old tail is gone... new tail is what tail2 was\n\t\t\t}\n\n\t\t\tif (eps.pointsCollinear(tail, head, head2)){\n\t\t\t\t// head isn't needed because it's directly between tail and head2\n\t\t\t\t// tail ---head---> head2\n\t\t\t\tif (buildLog)\n\t\t\t\t\tbuildLog.chainRemoveHead(index2, head);\n\t\t\t\tchain2.shift();\n\t\t\t}\n\n\t\t\tif (buildLog)\n\t\t\t\tbuildLog.chainJoin(index1, index2);\n\t\t\tchains[index1] = chain1.concat(chain2);\n\t\t\tchains.splice(index2, 1);\n\t\t}\n\n\t\tvar F = first_match.index;\n\t\tvar S = second_match.index;\n\n\t\tif (buildLog)\n\t\t\tbuildLog.chainConnect(F, S);\n\n\t\tvar reverseF = chains[F].length < chains[S].length; // reverse the shorter chain, if needed\n\t\tif (first_match.matches_head){\n\t\t\tif (second_match.matches_head){\n\t\t\t\tif (reverseF){\n\t\t\t\t\t// <<<< F <<<< --- >>>> S >>>>\n\t\t\t\t\treverseChain(F);\n\t\t\t\t\t// >>>> F >>>> --- >>>> S >>>>\n\t\t\t\t\tappendChain(F, S);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// <<<< F <<<< --- >>>> S >>>>\n\t\t\t\t\treverseChain(S);\n\t\t\t\t\t// <<<< F <<<< --- <<<< S <<<<   logically same as:\n\t\t\t\t\t// >>>> S >>>> --- >>>> F >>>>\n\t\t\t\t\tappendChain(S, F);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\t// <<<< F <<<< --- <<<< S <<<<   logically same as:\n\t\t\t\t// >>>> S >>>> --- >>>> F >>>>\n\t\t\t\tappendChain(S, F);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif (second_match.matches_head){\n\t\t\t\t// >>>> F >>>> --- >>>> S >>>>\n\t\t\t\tappendChain(F, S);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif (reverseF){\n\t\t\t\t\t// >>>> F >>>> --- <<<< S <<<<\n\t\t\t\t\treverseChain(F);\n\t\t\t\t\t// <<<< F <<<< --- <<<< S <<<<   logically same as:\n\t\t\t\t\t// >>>> S >>>> --- >>>> F >>>>\n\t\t\t\t\tappendChain(S, F);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// >>>> F >>>> --- <<<< S <<<<\n\t\t\t\t\treverseChain(S);\n\t\t\t\t\t// >>>> F >>>> --- >>>> S >>>>\n\t\t\t\t\tappendChain(F, S);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\treturn regions;\n}\n\nmodule.exports = SegmentChainer;\n","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n\n//\n// filter a list of segments based on boolean operations\n//\n\nfunction select(segments, selection, buildLog){\n\tvar result = [];\n\tsegments.forEach(function(seg){\n\t\tvar index =\n\t\t\t(seg.myFill.above ? 8 : 0) +\n\t\t\t(seg.myFill.below ? 4 : 0) +\n\t\t\t((seg.otherFill && seg.otherFill.above) ? 2 : 0) +\n\t\t\t((seg.otherFill && seg.otherFill.below) ? 1 : 0);\n\t\tif (selection[index] !== 0){\n\t\t\t// copy the segment to the results, while also calculating the fill status\n\t\t\tresult.push({\n\t\t\t\tid: buildLog ? buildLog.segmentId() : -1,\n\t\t\t\tstart: seg.start,\n\t\t\t\tend: seg.end,\n\t\t\t\tmyFill: {\n\t\t\t\t\tabove: selection[index] === 1, // 1 if filled above\n\t\t\t\t\tbelow: selection[index] === 2  // 2 if filled below\n\t\t\t\t},\n\t\t\t\totherFill: null\n\t\t\t});\n\t\t}\n\t});\n\n\tif (buildLog)\n\t\tbuildLog.selected(result);\n\n\treturn result;\n}\n\nvar SegmentSelector = {\n\tunion: function(segments, buildLog){ // primary | secondary\n\t\t// above1 below1 above2 below2    Keep?               Value\n\t\t//    0      0      0      0   =>   no                  0\n\t\t//    0      0      0      1   =>   yes filled below    2\n\t\t//    0      0      1      0   =>   yes filled above    1\n\t\t//    0      0      1      1   =>   no                  0\n\t\t//    0      1      0      0   =>   yes filled below    2\n\t\t//    0      1      0      1   =>   yes filled below    2\n\t\t//    0      1      1      0   =>   no                  0\n\t\t//    0      1      1      1   =>   no                  0\n\t\t//    1      0      0      0   =>   yes filled above    1\n\t\t//    1      0      0      1   =>   no                  0\n\t\t//    1      0      1      0   =>   yes filled above    1\n\t\t//    1      0      1      1   =>   no                  0\n\t\t//    1      1      0      0   =>   no                  0\n\t\t//    1      1      0      1   =>   no                  0\n\t\t//    1      1      1      0   =>   no                  0\n\t\t//    1      1      1      1   =>   no                  0\n\t\treturn select(segments, [\n\t\t\t0, 2, 1, 0,\n\t\t\t2, 2, 0, 0,\n\t\t\t1, 0, 1, 0,\n\t\t\t0, 0, 0, 0\n\t\t], buildLog);\n\t},\n\tintersect: function(segments, buildLog){ // primary & secondary\n\t\t// above1 below1 above2 below2    Keep?               Value\n\t\t//    0      0      0      0   =>   no                  0\n\t\t//    0      0      0      1   =>   no                  0\n\t\t//    0      0      1      0   =>   no                  0\n\t\t//    0      0      1      1   =>   no                  0\n\t\t//    0      1      0      0   =>   no                  0\n\t\t//    0      1      0      1   =>   yes filled below    2\n\t\t//    0      1      1      0   =>   no                  0\n\t\t//    0      1      1      1   =>   yes filled below    2\n\t\t//    1      0      0      0   =>   no                  0\n\t\t//    1      0      0      1   =>   no                  0\n\t\t//    1      0      1      0   =>   yes filled above    1\n\t\t//    1      0      1      1   =>   yes filled above    1\n\t\t//    1      1      0      0   =>   no                  0\n\t\t//    1      1      0      1   =>   yes filled below    2\n\t\t//    1      1      1      0   =>   yes filled above    1\n\t\t//    1      1      1      1   =>   no                  0\n\t\treturn select(segments, [\n\t\t\t0, 0, 0, 0,\n\t\t\t0, 2, 0, 2,\n\t\t\t0, 0, 1, 1,\n\t\t\t0, 2, 1, 0\n\t\t], buildLog);\n\t},\n\tdifference: function(segments, buildLog){ // primary - secondary\n\t\t// above1 below1 above2 below2    Keep?               Value\n\t\t//    0      0      0      0   =>   no                  0\n\t\t//    0      0      0      1   =>   no                  0\n\t\t//    0      0      1      0   =>   no                  0\n\t\t//    0      0      1      1   =>   no                  0\n\t\t//    0      1      0      0   =>   yes filled below    2\n\t\t//    0      1      0      1   =>   no                  0\n\t\t//    0      1      1      0   =>   yes filled below    2\n\t\t//    0      1      1      1   =>   no                  0\n\t\t//    1      0      0      0   =>   yes filled above    1\n\t\t//    1      0      0      1   =>   yes filled above    1\n\t\t//    1      0      1      0   =>   no                  0\n\t\t//    1      0      1      1   =>   no                  0\n\t\t//    1      1      0      0   =>   no                  0\n\t\t//    1      1      0      1   =>   yes filled above    1\n\t\t//    1      1      1      0   =>   yes filled below    2\n\t\t//    1      1      1      1   =>   no                  0\n\t\treturn select(segments, [\n\t\t\t0, 0, 0, 0,\n\t\t\t2, 0, 2, 0,\n\t\t\t1, 1, 0, 0,\n\t\t\t0, 1, 2, 0\n\t\t], buildLog);\n\t},\n\tdifferenceRev: function(segments, buildLog){ // secondary - primary\n\t\t// above1 below1 above2 below2    Keep?               Value\n\t\t//    0      0      0      0   =>   no                  0\n\t\t//    0      0      0      1   =>   yes filled below    2\n\t\t//    0      0      1      0   =>   yes filled above    1\n\t\t//    0      0      1      1   =>   no                  0\n\t\t//    0      1      0      0   =>   no                  0\n\t\t//    0      1      0      1   =>   no                  0\n\t\t//    0      1      1      0   =>   yes filled above    1\n\t\t//    0      1      1      1   =>   yes filled above    1\n\t\t//    1      0      0      0   =>   no                  0\n\t\t//    1      0      0      1   =>   yes filled below    2\n\t\t//    1      0      1      0   =>   no                  0\n\t\t//    1      0      1      1   =>   yes filled below    2\n\t\t//    1      1      0      0   =>   no                  0\n\t\t//    1      1      0      1   =>   no                  0\n\t\t//    1      1      1      0   =>   no                  0\n\t\t//    1      1      1      1   =>   no                  0\n\t\treturn select(segments, [\n\t\t\t0, 2, 1, 0,\n\t\t\t0, 0, 1, 1,\n\t\t\t0, 2, 0, 2,\n\t\t\t0, 0, 0, 0\n\t\t], buildLog);\n\t},\n\txor: function(segments, buildLog){ // primary ^ secondary\n\t\t// above1 below1 above2 below2    Keep?               Value\n\t\t//    0      0      0      0   =>   no                  0\n\t\t//    0      0      0      1   =>   yes filled below    2\n\t\t//    0      0      1      0   =>   yes filled above    1\n\t\t//    0      0      1      1   =>   no                  0\n\t\t//    0      1      0      0   =>   yes filled below    2\n\t\t//    0      1      0      1   =>   no                  0\n\t\t//    0      1      1      0   =>   no                  0\n\t\t//    0      1      1      1   =>   yes filled above    1\n\t\t//    1      0      0      0   =>   yes filled above    1\n\t\t//    1      0      0      1   =>   no                  0\n\t\t//    1      0      1      0   =>   no                  0\n\t\t//    1      0      1      1   =>   yes filled below    2\n\t\t//    1      1      0      0   =>   no                  0\n\t\t//    1      1      0      1   =>   yes filled above    1\n\t\t//    1      1      1      0   =>   yes filled below    2\n\t\t//    1      1      1      1   =>   no                  0\n\t\treturn select(segments, [\n\t\t\t0, 2, 1, 0,\n\t\t\t2, 0, 0, 1,\n\t\t\t1, 0, 0, 2,\n\t\t\t0, 1, 2, 0\n\t\t], buildLog);\n\t}\n};\n\nmodule.exports = SegmentSelector;\n","// (c) Copyright 2017, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n\n//\n// convert between PolyBool polygon format and GeoJSON formats (Polygon and MultiPolygon)\n//\n\nvar GeoJSON = {\n\t// convert a GeoJSON object to a PolyBool polygon\n\ttoPolygon: function(PolyBool, geojson){\n\n\t\t// converts list of LineString's to segments\n\t\tfunction GeoPoly(coords){\n\t\t\t// check for empty coords\n\t\t\tif (coords.length <= 0)\n\t\t\t\treturn PolyBool.segments({ inverted: false, regions: [] });\n\n\t\t\t// convert LineString to segments\n\t\t\tfunction LineString(ls){\n\t\t\t\t// remove tail which should be the same as head\n\t\t\t\tvar reg = ls.slice(0, ls.length - 1);\n\t\t\t\treturn PolyBool.segments({ inverted: false, regions: [reg] });\n\t\t\t}\n\n\t\t\t// the first LineString is considered the outside\n\t\t\tvar out = LineString(coords[0]);\n\n\t\t\t// the rest of the LineStrings are considered interior holes, so subtract them from the\n\t\t\t// current result\n\t\t\tfor (var i = 1; i < coords.length; i++)\n\t\t\t\tout = PolyBool.selectDifference(PolyBool.combine(out, LineString(coords[i])));\n\n\t\t\treturn out;\n\t\t}\n\n\t\tif (geojson.type === 'Polygon'){\n\t\t\t// single polygon, so just convert it and we're done\n\t\t\treturn PolyBool.polygon(GeoPoly(geojson.coordinates));\n\t\t}\n\t\telse if (geojson.type === 'MultiPolygon'){\n\t\t\t// multiple polygons, so union all the polygons together\n\t\t\tvar out = PolyBool.segments({ inverted: false, regions: [] });\n\t\t\tfor (var i = 0; i < geojson.coordinates.length; i++)\n\t\t\t\tout = PolyBool.selectUnion(PolyBool.combine(out, GeoPoly(geojson.coordinates[i])));\n\t\t\treturn PolyBool.polygon(out);\n\t\t}\n\t\tthrow new Error('PolyBool: Cannot convert GeoJSON object to PolyBool polygon');\n\t},\n\n\t// convert a PolyBool polygon to a GeoJSON object\n\tfromPolygon: function(PolyBool, eps, poly){\n\t\t// make sure out polygon is clean\n\t\tpoly = PolyBool.polygon(PolyBool.segments(poly));\n\n\t\t// test if r1 is inside r2\n\t\tfunction regionInsideRegion(r1, r2){\n\t\t\t// we're guaranteed no lines intersect (because the polygon is clean), but a vertex\n\t\t\t// could be on the edge -- so we just average pt[0] and pt[1] to produce a point on the\n\t\t\t// edge of the first line, which cannot be on an edge\n\t\t\treturn eps.pointInsideRegion([\n\t\t\t\t(r1[0][0] + r1[1][0]) * 0.5,\n\t\t\t\t(r1[0][1] + r1[1][1]) * 0.5\n\t\t\t], r2);\n\t\t}\n\n\t\t// calculate inside heirarchy\n\t\t//\n\t\t//  _____________________   _______    roots -> A       -> F\n\t\t// |          A          | |   F   |            |          |\n\t\t// |  _______   _______  | |  ___  |            +-- B      +-- G\n\t\t// | |   B   | |   C   | | | |   | |            |   |\n\t\t// | |  ___  | |  ___  | | | |   | |            |   +-- D\n\t\t// | | | D | | | | E | | | | | G | |            |\n\t\t// | | |___| | | |___| | | | |   | |            +-- C\n\t\t// | |_______| |_______| | | |___| |                |\n\t\t// |_____________________| |_______|                +-- E\n\n\t\tfunction newNode(region){\n\t\t\treturn {\n\t\t\t\tregion: region,\n\t\t\t\tchildren: []\n\t\t\t};\n\t\t}\n\n\t\tvar roots = newNode(null);\n\n\t\tfunction addChild(root, region){\n\t\t\t// first check if we're inside any children\n\t\t\tfor (var i = 0; i < root.children.length; i++){\n\t\t\t\tvar child = root.children[i];\n\t\t\t\tif (regionInsideRegion(region, child.region)){\n\t\t\t\t\t// we are, so insert inside them instead\n\t\t\t\t\taddChild(child, region);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// not inside any children, so check to see if any children are inside us\n\t\t\tvar node = newNode(region);\n\t\t\tfor (var i = 0; i < root.children.length; i++){\n\t\t\t\tvar child = root.children[i];\n\t\t\t\tif (regionInsideRegion(child.region, region)){\n\t\t\t\t\t// oops... move the child beneath us, and remove them from root\n\t\t\t\t\tnode.children.push(child);\n\t\t\t\t\troot.children.splice(i, 1);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// now we can add ourselves\n\t\t\troot.children.push(node);\n\t\t}\n\n\t\t// add all regions to the root\n\t\tfor (var i = 0; i < poly.regions.length; i++){\n\t\t\tvar region = poly.regions[i];\n\t\t\tif (region.length < 3) // regions must have at least 3 points (sanity check)\n\t\t\t\tcontinue;\n\t\t\taddChild(roots, region);\n\t\t}\n\n\t\t// with our heirarchy, we can distinguish between exterior borders, and interior holes\n\t\t// the root nodes are exterior, children are interior, children's children are exterior,\n\t\t// children's children's children are interior, etc\n\n\t\t// while we're at it, exteriors are counter-clockwise, and interiors are clockwise\n\n\t\tfunction forceWinding(region, clockwise){\n\t\t\t// first, see if we're clockwise or counter-clockwise\n\t\t\t// https://en.wikipedia.org/wiki/Shoelace_formula\n\t\t\tvar winding = 0;\n\t\t\tvar last_x = region[region.length - 1][0];\n\t\t\tvar last_y = region[region.length - 1][1];\n\t\t\tvar copy = [];\n\t\t\tfor (var i = 0; i < region.length; i++){\n\t\t\t\tvar curr_x = region[i][0];\n\t\t\t\tvar curr_y = region[i][1];\n\t\t\t\tcopy.push([curr_x, curr_y]); // create a copy while we're at it\n\t\t\t\twinding += curr_y * last_x - curr_x * last_y;\n\t\t\t\tlast_x = curr_x;\n\t\t\t\tlast_y = curr_y;\n\t\t\t}\n\t\t\t// this assumes Cartesian coordinates (Y is positive going up)\n\t\t\tvar isclockwise = winding < 0;\n\t\t\tif (isclockwise !== clockwise)\n\t\t\t\tcopy.reverse();\n\t\t\t// while we're here, the last point must be the first point...\n\t\t\tcopy.push([copy[0][0], copy[0][1]]);\n\t\t\treturn copy;\n\t\t}\n\n\t\tvar geopolys = [];\n\n\t\tfunction addExterior(node){\n\t\t\tvar poly = [forceWinding(node.region, false)];\n\t\t\tgeopolys.push(poly);\n\t\t\t// children of exteriors are interior\n\t\t\tfor (var i = 0; i < node.children.length; i++)\n\t\t\t\tpoly.push(getInterior(node.children[i]));\n\t\t}\n\n\t\tfunction getInterior(node){\n\t\t\t// children of interiors are exterior\n\t\t\tfor (var i = 0; i < node.children.length; i++)\n\t\t\t\taddExterior(node.children[i]);\n\t\t\t// return the clockwise interior\n\t\t\treturn forceWinding(node.region, true);\n\t\t}\n\n\t\t// root nodes are exterior\n\t\tfor (var i = 0; i < roots.children.length; i++)\n\t\t\taddExterior(roots.children[i]);\n\n\t\t// lastly, construct the approrpriate GeoJSON object\n\n\t\tif (geopolys.length <= 0) // empty GeoJSON Polygon\n\t\t\treturn { type: 'Polygon', coordinates: [] };\n\t\tif (geopolys.length == 1) // use a GeoJSON Polygon\n\t\t\treturn { type: 'Polygon', coordinates: geopolys[0] };\n\t\treturn { // otherwise, use a GeoJSON MultiPolygon\n\t\t\ttype: 'MultiPolygon',\n\t\t\tcoordinates: geopolys\n\t\t};\n\t}\n};\n\nmodule.exports = GeoJSON;\n","/*\n * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc\n * @license MIT\n * @preserve Project Home: https://github.com/voidqk/polybooljs\n */\n\nvar BuildLog = require('./lib/build-log');\nvar Epsilon = require('./lib/epsilon');\nvar Intersecter = require('./lib/intersecter');\nvar SegmentChainer = require('./lib/segment-chainer');\nvar SegmentSelector = require('./lib/segment-selector');\nvar GeoJSON = require('./lib/geojson');\n\nvar buildLog = false;\nvar epsilon = Epsilon();\n\nvar PolyBool;\nPolyBool = {\n\t// getter/setter for buildLog\n\tbuildLog: function(bl){\n\t\tif (bl === true)\n\t\t\tbuildLog = BuildLog();\n\t\telse if (bl === false)\n\t\t\tbuildLog = false;\n\t\treturn buildLog === false ? false : buildLog.list;\n\t},\n\t// getter/setter for epsilon\n\tepsilon: function(v){\n\t\treturn epsilon.epsilon(v);\n\t},\n\n\t// core API\n\tsegments: function(poly){\n\t\tvar i = Intersecter(true, epsilon, buildLog);\n\t\tpoly.regions.forEach(i.addRegion);\n\t\treturn {\n\t\t\tsegments: i.calculate(poly.inverted),\n\t\t\tinverted: poly.inverted\n\t\t};\n\t},\n\tcombine: function(segments1, segments2){\n\t\tvar i3 = Intersecter(false, epsilon, buildLog);\n\t\treturn {\n\t\t\tcombined: i3.calculate(\n\t\t\t\tsegments1.segments, segments1.inverted,\n\t\t\t\tsegments2.segments, segments2.inverted\n\t\t\t),\n\t\t\tinverted1: segments1.inverted,\n\t\t\tinverted2: segments2.inverted\n\t\t};\n\t},\n\tselectUnion: function(combined){\n\t\treturn {\n\t\t\tsegments: SegmentSelector.union(combined.combined, buildLog),\n\t\t\tinverted: combined.inverted1 || combined.inverted2\n\t\t}\n\t},\n\tselectIntersect: function(combined){\n\t\treturn {\n\t\t\tsegments: SegmentSelector.intersect(combined.combined, buildLog),\n\t\t\tinverted: combined.inverted1 && combined.inverted2\n\t\t}\n\t},\n\tselectDifference: function(combined){\n\t\treturn {\n\t\t\tsegments: SegmentSelector.difference(combined.combined, buildLog),\n\t\t\tinverted: combined.inverted1 && !combined.inverted2\n\t\t}\n\t},\n\tselectDifferenceRev: function(combined){\n\t\treturn {\n\t\t\tsegments: SegmentSelector.differenceRev(combined.combined, buildLog),\n\t\t\tinverted: !combined.inverted1 && combined.inverted2\n\t\t}\n\t},\n\tselectXor: function(combined){\n\t\treturn {\n\t\t\tsegments: SegmentSelector.xor(combined.combined, buildLog),\n\t\t\tinverted: combined.inverted1 !== combined.inverted2\n\t\t}\n\t},\n\tpolygon: function(segments){\n\t\treturn {\n\t\t\tregions: SegmentChainer(segments.segments, epsilon, buildLog),\n\t\t\tinverted: segments.inverted\n\t\t};\n\t},\n\n\t// GeoJSON converters\n\tpolygonFromGeoJSON: function(geojson){\n\t\treturn GeoJSON.toPolygon(PolyBool, geojson);\n\t},\n\tpolygonToGeoJSON: function(poly){\n\t\treturn GeoJSON.fromPolygon(PolyBool, epsilon, poly);\n\t},\n\n\t// helper functions for common operations\n\tunion: function(poly1, poly2){\n\t\treturn operate(poly1, poly2, PolyBool.selectUnion);\n\t},\n\tintersect: function(poly1, poly2){\n\t\treturn operate(poly1, poly2, PolyBool.selectIntersect);\n\t},\n\tdifference: function(poly1, poly2){\n\t\treturn operate(poly1, poly2, PolyBool.selectDifference);\n\t},\n\tdifferenceRev: function(poly1, poly2){\n\t\treturn operate(poly1, poly2, PolyBool.selectDifferenceRev);\n\t},\n\txor: function(poly1, poly2){\n\t\treturn operate(poly1, poly2, PolyBool.selectXor);\n\t}\n};\n\nfunction operate(poly1, poly2, selector){\n\tvar seg1 = PolyBool.segments(poly1);\n\tvar seg2 = PolyBool.segments(poly2);\n\tvar comb = PolyBool.combine(seg1, seg2);\n\tvar seg3 = selector(comb);\n\treturn PolyBool.polygon(seg3);\n}\n\nif (typeof window === 'object')\n\twindow.PolyBool = PolyBool;\n\nmodule.exports = PolyBool;\n","\n\nclass VectorTools {\n\n\n\n\n  /*\n    performs a cross product between v1 and v2.\n    args:\n      v1: Array[3] - vector #1\n      v2: Array[3] - vector #2\n      normalize: boolean - normalize the output vector when true\n\n    return:\n      Array[3] - the vctor result of the cross product\n  */\n  static crossProduct(v1, v2, normalize){\n\n    var normalVector = [\n        v1[1] * v2[2] - v1[2] * v2[1],\n        (v1[0] * v2[2] - v1[2] * v2[0] ) * (-1),\n        v1[0] * v2[1] - v1[1] * v2[0]\n    ];\n\n    if(normalize)\n        normalVector = VectorTools.normalize(normalVector);\n\n    return normalVector;\n  }\n\n\n  /*\n    compute the dot product between v1 and v2.\n    Note: v1 and v2 must be normalize so that the dot product is also\n    the cosine of the angle between v1 and v2.\n  */\n  static dotProduct(v1, v2){\n    if(v1.length != v2.length){\n      console.log(\"ERROR: v1 and v2 must be the same size to compute a dot product\");\n      return null;\n    }\n\n    var sum = 0;\n\n    for(var i=0; i<v1.length; i++){\n      sum += (v1[i]*v2[i]);\n    }\n\n    return sum;\n\n  }\n\n\n  /*\n    Return a normalized vector from v (does not replace v).\n    args:\n      v: Array[3] - vector to normalize\n\n    return:\n      Array[3] - a normalized vector\n  */\n  static normalize(v){\n    var n = VectorTools.getNorm(v);\n    var normalizedV = [v[0]/n, v[1]/n, v[2]/n];\n    return normalizedV;\n  }\n\n\n  /*\n    return the norm (length) of a vector [x, y, z]\n  */\n  static getNorm(v){\n    return Math.sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2]);\n  }\n\n\n\n  /*\n    rotate the vector v using the rotation matrix m.\n    Args:\n      v: array - [x, y, z]\n      m: array[array] -\n          [[a, b, c],\n           [d, e, f],\n           [g, h, i]]\n\n    Return rotated vector:\n      [ax + by + cz,\n       dx + ey + fz,\n       gx + hy + iz]\n  */\n  static rotate(v, m){\n    var vRot = [\n      v[0]*m[0][0] + v[1]*m[0][1] + v[2]*m[0][2],\n      v[0]*m[1][0] + v[1]*m[1][1] + v[2]*m[1][2],\n      v[0]*m[2][0] + v[1]*m[2][1] + v[2]*m[2][2],\n    ];\n\n    return vRot;\n  }\n\n\n  /*\n    compute the angle p1p2p3 in radians.\n    Does not give the sign, just absolute angle!\n    args:\n      p1, p2, p3: array [x, y, z] - 3D coordinate of each point\n  */\n  static getAnglePoints(p1, p2, p3){\n\n    //  the configuration is somthing like that:\n    //\n    //  p1-----p2\n    //        /\n    //       /\n    //      p3\n\n    var v_p2p1 = [\n      p1[0] - p2[0],\n      p1[1] - p2[1],\n      p1[2] - p2[2],\n    ];\n\n    var v_p2p3 = [\n      p3[0] - p2[0],\n      p3[1] - p2[1],\n      p3[2] - p2[2],\n    ];\n\n    // normalizing those vectors\n    v_p2p1 = VectorTools.normalize(v_p2p1);\n    v_p2p3 = VectorTools.normalize(v_p2p3);\n\n    var cosine = VectorTools.dotProduct(v_p2p1, v_p2p3);\n    var angleRad = Math.acos(cosine);\n\n    return angleRad;\n  }\n\n\n\n}\n\nexport { VectorTools };\n","import AreaPolygon from \"area-polygon\";\n//import greinerHormann from 'greiner-hormann';\nimport PolyBool from 'polybooljs';\nimport { VectorTools } from './VectorTools.js'\n\n\nclass ConvexPolygon {\n\n  constructor( points ){\n    this._isValid = false;\n    this._hull = null;\n    this._area = null;\n\n    if( Array.isArray( points ) && points.length > 2 ){\n      var polygonPoints = null;\n      // we are dealing with a [ {x, y}, {x, y}, ... ] polygon\n      if( \"x\" in points[0] && \"y\" in points[0] ){\n        polygonPoints = points.map( function(p){ return [p.x, p.y]} );\n\n      // we are dealing with a [ [x, y], [x, y], ... ]\n      }else if( Array.isArray( points[0] ) ){\n        polygonPoints = points.map( function(p){ return [p[0], p[1]]} );\n      }\n\n      if( polygonPoints ){\n        polygonPoints = ConvexPolygon.removeDuplicateVertices( polygonPoints )\n        this._hull = ConvexPolygon.orderPolygonPoints( polygonPoints );\n      }\n\n      this._isValid = !!this._hull\n    }\n  }\n\n  isValid(){\n    return this._isValid;\n  }\n\n\n  static removeDuplicateVertices( polygonPoints ){\n    var newPolyPoints = [ polygonPoints[0] ];\n    var eps = 0.0001;\n\n    for(var i=1; i<polygonPoints.length; i++){\n      let alreadyIn = false;\n      for(var j=0; j<newPolyPoints.length; j++){\n        var xDiff = Math.abs(polygonPoints[i][0] - newPolyPoints[j][0]);\n        var yDiff = Math.abs(polygonPoints[i][1] - newPolyPoints[j][1]);\n        //var zDiff = Math.abs(polygonPoints[i][2] - newPolyPoints[j][2]);\n\n        if( (xDiff < eps) && (yDiff < eps) /*&& (zDiff < eps)*/){\n          alreadyIn = true;\n          break\n        }\n\n        /*\n        if( (polygonPoints[i][0] - newPolyPoints[j][0]) < eps &&\n            (polygonPoints[i][1] - newPolyPoints[j][1]) < eps &&\n            (polygonPoints[i][2] - newPolyPoints[j][2]) < eps )\n        {\n          alreadyIn = true;\n          break\n        }\n        */\n      }\n      if( !alreadyIn ){\n        newPolyPoints.push( polygonPoints[i] );\n      }\n    }\n\n    return newPolyPoints;\n  }\n\n\n  static getPolygonCenter( polygonPoints ){\n    var nbVertice = polygonPoints.length;\n\n    // find the center of the polygon\n    var xAvg = 0;\n    var yAvg = 0;\n    var zAvg = 0;\n\n    for(var v=0; v<nbVertice; v++){\n      xAvg += polygonPoints[v][0];\n      yAvg += polygonPoints[v][1];\n      zAvg += polygonPoints[v][2];\n    }\n\n    xAvg /= nbVertice;\n    yAvg /= nbVertice;\n    zAvg /= nbVertice;\n    var center = [xAvg, yAvg, zAvg];\n\n    return center;\n  }\n\n\n\n\n\n  static orderPolygonPoints( polygonPoints ){\n    var polygonPoints3D = polygonPoints.map(function(p){return [p[0], p[1], 0]});\n    var nbVertice = polygonPoints3D.length;\n    var center = ConvexPolygon.getPolygonCenter( polygonPoints3D );\n    //console.log( center );\n\n    // create normalized vectors from center to each vertex of the polygon\n    var normalizedRays = [];\n    for(var v=0; v<nbVertice; v++){\n      var currentRay = [\n        center[0] - polygonPoints3D[v][0],\n        center[1] - polygonPoints3D[v][1],\n        center[2] - polygonPoints3D[v][2]\n      ];\n\n      normalizedRays.push(VectorTools.normalize(currentRay));\n    }\n\n    // for each, we have .vertice (a [x, y, z] array) and .angle (rad angle to planePolygonWithAngles[0])\n    var planePolygonWithAngles = [];\n    var verticalRay = [0, 1, 0];\n\n    // find the angle of each towards the first vertex\n    //planePolygonWithAngles.push({vertex: polygonPoints3D[0], angle: 0})\n\n    //for(var v=1; v<nbVertice; v++){\n    for(var v=0; v<nbVertice; v++){\n      var cos = VectorTools.dotProduct(verticalRay, normalizedRays[v]);\n      var angle = Math.acos(cos);\n      var currentPolygonNormal = VectorTools.crossProduct(verticalRay, normalizedRays[v], false);\n      var planeNormal = [0, 0, 1];\n      var angleSign = VectorTools.dotProduct(currentPolygonNormal, planeNormal)>0? 1:-1;\n      angle *= angleSign;\n\n      if( angle < 0 ){\n        angle = Math.PI + ( Math.PI + angle );\n      }\n\n      planePolygonWithAngles.push({vertex: polygonPoints3D[v], angle: angle})\n    }\n\n    // sort vertices based on their angle to [0]\n    planePolygonWithAngles.sort(function(a, b){\n      return a.angle - b.angle;\n    });\n\n    // make a array of vertex only (ordered)\n    var orderedVertice = [];\n    for(var v=0; v<nbVertice; v++){\n      orderedVertice.push(planePolygonWithAngles[v].vertex);\n    }\n\n    // attribute the ordered array to this.planePolygo\n    //newPolyPoints = newPolyPoints.map(function(p){return [p[0], p[1]]});\n    orderedVertice = orderedVertice.map(function(p){return [p[0], p[1]]});\n    return orderedVertice;\n  }\n\n\n\n  getArea(){\n    if (! this._area){\n      this._area = AreaPolygon( this._hull );\n    }\n    return this._area;\n  }\n\n\n  getIntersection( anotherPolygon ){\n    // TODO the intersection gives the input\n    var polyA = {\n                regions: [\n                  this.get2DHull()\n                ],\n                inverted: false\n              }\n\n    var polyB = {\n                regions: [\n                  anotherPolygon.get2DHull()\n                ],\n                inverted: false\n              }\n\n    var vertices = PolyBool.intersect( polyA , polyB );\n    var interPolygon = new ConvexPolygon( vertices.regions[0] );\n    return interPolygon;\n  }\n\n\n  getHull(){\n    return this._hull;\n  }\n\n\n  get2DHull(){\n    return this._hull.map(function(p){ return [p[0], p[1]]});\n  }\n\n  isSame( otherPolygon ){\n    var eps = 0.0001;\n    var otherHull = otherPolygon.getHull();\n\n    if( this._hull.length !== otherHull.length )\n      return false;\n\n    for(var i=0; i<otherHull.length; i++){\n      //if( (otherHull[i][0]!==this._hull[i][0] || otherHull[i][1]!==this._hull[i][1]))\n      //  return false;\n\n      if( (Math.abs(otherHull[i][0] - this._hull[i][0])>eps || Math.abs(otherHull[i][1] - this._hull[i][1]) > eps ))\n        return false;\n    }\n\n    return true;\n  }\n\n\n\n\n\n}\n\nexport { ConvexPolygon };\n","import { ConvexPolygon } from \"./ConvexPolygon.js\";\n\n\n/**\n* A Cell instance defines a polygon from a Voronoi diagram and its seed.\n*/\nclass Cell {\n\n  /**\n  * Build a cell.\n  * @param {Array}\n  */\n  constructor( contourPoints, seed ){\n    this._hash = Cell.getHash( seed.x, seed.y )\n    this._polygon= new ConvexPolygon( contourPoints );\n    this._seed = seed;\n    this._isValid = (this._polygon.isValid() && !!this._hash);\n  }\n\n\n  isValid(){\n    return this._isValid;\n  }\n\n\n  getHash(){\n    return this._hash;\n  }\n\n\n  getSeed(){\n    return this._seed;\n  }\n\n\n  getPolygon(){\n    return this._polygon;\n  }\n\n\n  // get a unique hash from 2 floats\n  static getHash( i1, i2 ){\n    //return md5( new Float32Array([f1, f2]) );\n    var base = 16;\n    var hash = (i1 < base ? \"0\" : '') + i1.toString(16) +\n               (i2 < base ? \"0\" : '') + i2.toString(16)\n    return hash;\n  }\n\n\n  getArea(){\n    return this._polygon.getArea();\n  }\n\n\n  intersectWithCell( anotherCell ){\n    return this._polygon.getIntersection( anotherCell.getPolygon() );\n  }\n\n\n  hasSamePolygon( otherCell ){\n    return this._polygon.isSame( otherCell.getPolygon() );\n  }\n\n\n\n}\n\nexport { Cell };\n","import { Cell } from './Cell.js';\n\nclass CellCollection {\n\n  constructor(){\n    this._cells = {}\n    this._cellArray = [];\n  }\n\n  buildFromVoronoiDiagram( vd ){\n    var vCells = vd.cells;\n\n    // for each cell\n    for(var i=0; i<vCells.length; i++){\n      var cellhes = vCells[i].halfedges;\n      var points = [];\n\n      for(var j=0; j<cellhes.length; j++){\n        points.push( cellhes[j].edge.va );\n        points.push( cellhes[j].edge.vb );\n      }\n\n      // build a cell\n      var cell = new Cell( points, vCells[i].site );\n      if( cell.isValid() ){\n        this._cells[ cell.getHash() ] = cell;\n        this._cellArray.push( cell );\n      }\n    }\n  }\n\n\n  /**\n  * Get the list of hashes (ID) of cells in the collection\n  * @return {Array} all the hashes\n  */\n  getCellHashes(){\n    return Object.keys( this._cells );\n  }\n\n\n  /**\n  * Get the cell of _this_ collection that has this hash\n  */\n  getCell( hash ){\n    if(hash in this._cells)\n      return this._cells[hash];\n  }\n\n\n  getUnindexedCells(){\n    var  unindexedCells = [];\n\n    for(var i=0; i<this._cellArray.length; i++){\n      var cell = this._cellArray[ i ]\n      if( cell.getSeed().seedIndex === -1 )\n        unindexedCells.push( cell );\n    }\n    /*\n    for( var hash in this._cells ){\n      var cell = this._cells[ hash ]\n      if( cell.getSeed().seedIndex === -1 )\n        unindexedCells.push( cell );\n    }\n    */\n    return unindexedCells;\n  }\n\n  /**\n  * Get the list of cells that are in the cell given in arg and that are NOT in\n  * _this_ collection.\n  * @param {CellCollection} anotherCellCollection - another cell collection, that presumably has cells that _this_ collection does not.\n  */\n  getAdditionalCells( anotherCellCollection ){\n    var anotherCellHashes = anotherCellCollection.getCellHashes()\n    var extraCells = [];\n\n    for(var i=0; i<anotherCellHashes.length; i++){\n      if( !(anotherCellHashes[i] in this._cells) ){\n        extraCells.push( anotherCellCollection.getCell(anotherCellHashes[i]) );\n      }\n    }\n    return extraCells;\n  }\n\n\n  getStolenAreaInfo( anotherCellCollection ){\n    // this is the added cell from the original\n    var addedCells = anotherCellCollection.getUnindexedCells();\n\n    if(addedCells.length === 0)\n      return null;\n\n    var addedCell = addedCells[0];\n    var addedCellArea = addedCell.getArea();\n\n    var modifiedCells = [];\n\n    var stolenTotal = 0;\n\n    for( var hash in this._cells ){\n      if( hash === addedCell.getHash() )\n        continue;\n\n      var originalCell = this._cells[ hash ];\n      var newCell = anotherCellCollection.getCell( hash );\n      var isSame = originalCell.hasSamePolygon( newCell );\n\n      if( !isSame ){\n        //console.log( `Not same: ${hash}`);\n        var stolenRatio = 0;\n        var stolenPoly = addedCell.intersectWithCell( originalCell );\n\n        if( stolenPoly.isValid() ){\n          var stolenArea = stolenPoly.getArea();\n          stolenRatio = stolenArea / addedCell.getArea();\n          stolenTotal += stolenRatio;\n        }\n\n        //modifiedCells.push( {cell: originalCell, stolenRatio: stolenRatio} );\n        modifiedCells.push( {seedIndex: originalCell.getSeed().seedIndex, stolenRatio: stolenRatio} );\n      }\n    }\n\n    return modifiedCells;\n  }\n\n\n}\n\n\nexport { CellCollection };\n","import Voronoi from 'voronoi';\nimport { CellCollection } from './CellCollection.js';\n\n\n\nclass Interpolator {\n  constructor(){\n    this._seeds = [];\n    this._output = { width: 256, height: 256 };\n    this._samplingMap = [];\n    this._recomputeMap = true;\n\n    // voronoi diagram of seeds only\n    this._seedCellCollection = null;\n  }\n\n\n  /**\n  * Removes all the seeds\n  */\n  cleanSeeds(){\n    this._seeds = [];\n    this._recomputeMap = true;\n  }\n\n  /**\n  * Add a seed to the interpolator. Note that the seed is not copied, only its reference is.\n  * This is convenient for updating the value of the seed from the outside and ecompute\n  * the interpolation without having to recompute the whole weight map.\n  * @param {Object} seed - of form {x: Number, y: Number, value: Number}\n  */\n  addSeed( seed ){\n    if( \"x\" in seed && \"y\" in seed && \"value\" in seed ){\n      this._seeds.push( seed );\n      this._recomputeMap = true;\n    }\n  }\n\n\n  /**\n  * Add an array of seed\n  * @param {Array} seedArr - array of seeds, where each seed is of form {x: Number, y: Number, value: Number}\n  */\n  addSeeds( seedArr ){\n    for(var i=0; i<seedArr.length; i++){\n      this.addSeed( seedArr[i] );\n    }\n  }\n\n\n  /**\n  * Define the size of the output image\n  */\n  setOutputSize( width, height ){\n    if( width > 0 && height > 0 ){\n      this._output.width = width;\n      this._output.height = height;\n    }\n  }\n\n\n  hasAllSeedsInside(){\n    var size = this._output;\n    return this._seeds.every( function(s){\n      return ( s.x>=0 && s.y>=0 && s.x<size.width && s.y<size.width );\n    })\n  }\n\n\n  /**\n  * Compute the sampling map. Automatically called by the update method when the\n  * map was never computed or when a seed have been added since.\n  * Though this method is not private and can be called to force recomputing the map\n  */\n  computeMap(){\n    if( !this.hasAllSeedsInside() ){\n      console.log( 'ERR: some seeds are outside of the image. Use .setOutputSize() to change the output size or modify the seed.' );\n      return;\n    }\n    this._generateSeedCells();\n    console.log( this._seedCellCollection );\n\n    var w = this._output.width;\n    var h = this._output.height;\n    this._samplingMap = new Array( w*h );\n\n    // for each pixel of the output image\n    for(var i=0; i<w; i++){\n      for(var j=0; j<h; j++){\n\n        var seedIndex = this.isAtSeedPosition(i, j);\n        var index1D = i + j*w;\n\n        if( seedIndex === -1 ){\n          //this._samplingMap[ index1D ] = this._generatePixelCells(i, j);\n          var pixelCellCollection = this._generatePixelCells(i, j);\n          var stolenAreaData = this._seedCellCollection.getStolenAreaInfo( pixelCellCollection )\n          this._samplingMap[ index1D ] = stolenAreaData;\n        }else{\n          this._samplingMap[ index1D ] = {seedIndex: seedIndex, stolenRatio: 1};\n        }\n      }\n    }\n\n\n    console.log( this._samplingMap );\n    // TODO: finish map for seed positions\n  }\n\n\n  getMap( m ){\n    return this._samplingMap;\n  }\n\n\n  setMap( map ){\n    if( map.length === (this._output.width * this._output.height)){\n      this._samplingMap = map;\n    }else{\n      console.log(\"The sampling map must be an 1D array of size output.x*output.y\");\n    }\n  }\n\n  /**\n  * is the given position at the position of a seed?\n  * @param {Number} i - position along x axis\n  * @param {Number} j - position along y axis\n  * @return {Boolean} -1 if not, of the index of the seed if yes\n  */\n  isAtSeedPosition(i, j){\n    return this._seeds.findIndex(function(elem){ return (elem.x==i && elem.y==j)})\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Generate the voronoi diagram where sites are only seeds\n  */\n  _generateSeedCells(){\n    var that = this;\n    var voronoi = new Voronoi();\n    var bbox = {xl: 0, xr: this._output.width, yt: 0, yb: this._output.height};\n    var sites = this._seeds.map( function( s, i ){ return {x: s.x, y: s.y, seedIndex: i} });\n    var seedVoronoiDiagram = voronoi.compute(sites, bbox);\n\n    this._seedCellCollection = new CellCollection();\n    this._seedCellCollection.buildFromVoronoiDiagram( seedVoronoiDiagram );\n  }\n\n\n  _generatePixelCells(i, j){\n    var that = this;\n    var voronoi = new Voronoi();\n    var bbox = {xl: 0, xr: this._output.width, yt: 0, yb: this._output.height};\n    var sites = this._seeds.map( function( s, i ){ return {x: s.x, y: s.y, seedIndex: i} });\n    sites.push( {x: i, y: j, seedIndex: -1} )\n    var pixelVoronoiDiagram = voronoi.compute(sites, bbox);\n\n    var pixelCellCollection = new CellCollection();\n    pixelCellCollection.buildFromVoronoiDiagram( pixelVoronoiDiagram );\n\n    if( pixelCellCollection._cellArray.length !== (this._seeds.length + 1))\n      console.log(\"ERR\");\n\n    return pixelCellCollection;\n  }\n\n\n\n}\n\nexport { Interpolator };\n"],"names":["LinkedList","buildLog","epsilon","Epsilon","BuildLog","Intersecter","SegmentSelector","SegmentChainer","geojson","GeoJSON","AreaPolygon","PolyBool","Voronoi"],"mappings":"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"}